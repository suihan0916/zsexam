(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~0f3ba690"],{"054e":function(e,t,i){"use strict";var n=i("be18"),a=i("bd8d"),o=i("535a"),s=i("2f63"),r=i("7d62"),c=i("c52f"),u=i("0123"),l=i("78e5"),d=i("eace"),h=i("6a29"),_=i("5a6c"),f=i("d8f6"),p=i("27aa");function m(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=Object(o["a"])(e.ellipsoid,c["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=Object(o["a"])(e.center,n["a"].ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._update=function(e,t){},this._readyPromise=I(this),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=_["a"].BOTH}function b(e){const t=new Float64Array(3+n["a"].packedLength+c["a"].packedLength+d["a"].packedLength);let i=0;return t[i++]=e._indices.BYTES_PER_ELEMENT,t[i++]=e._minimumHeight,t[i++]=e._maximumHeight,n["a"].pack(e._center,t,i),i+=n["a"].packedLength,c["a"].pack(e._ellipsoid,t,i),i+=c["a"].packedLength,d["a"].pack(e._rectangle,t,i),t}function g(e,t){let i=1;const n=t[i++],o=e._boundingVolumes=new Array(n);for(let a=0;a<n;++a)o[a]=l["a"].unpack(t,i),i+=l["a"].packedLength;const s=t[i++],r=e._batchedIndices=new Array(s);for(let c=0;c<s;++c){const e=a["a"].unpack(t,i);i+=a["a"].packedLength;const n=t[i++],o=t[i++],s=t[i++],u=new Array(s);for(let a=0;a<s;++a)u[a]=t[i++];r[c]=new f["a"]({color:e,offset:n,count:o,batchIds:u})}}Object.defineProperties(m.prototype,{trianglesLength:{get:function(){return Object(s["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(s["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise}}});const y=new h["a"]("createVectorTilePolygons",5),O=new a["a"];function v(e){if(!Object(s["a"])(e._primitive)&&!Object(s["a"])(e._verticesPromise)){let t=e._positions,i=e._counts,n=e._indexCounts,a=e._indices,o=e._transferrableBatchIds,r=e._batchTableColors,c=e._packedBuffer;if(!Object(s["a"])(r)){t=e._positions=e._positions.slice(),i=e._counts=e._counts.slice(),n=e._indexCounts=e._indexCounts.slice(),a=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(d["a"].center(e._rectangle)),o=e._transferrableBatchIds=new Uint32Array(e._batchIds),r=e._batchTableColors=new Uint32Array(o.length);const s=e._batchTable,u=r.length;for(let e=0;e<u;++e){const t=s.getColor(e,O);r[e]=t.toRgba()}c=e._packedBuffer=b(e)}const l=[t.buffer,i.buffer,n.buffer,a.buffer,o.buffer,r.buffer,c.buffer],h={packedBuffer:c.buffer,positions:t.buffer,counts:i.buffer,indexCounts:n.buffer,indices:a.buffer,batchIds:o.buffer,batchTableColors:r.buffer};let _=e._polygonMinimumHeights,f=e._polygonMaximumHeights;Object(s["a"])(_)&&Object(s["a"])(f)&&(_=_.slice(),f=f.slice(),l.push(_.buffer,f.buffer),h.minimumHeights=_,h.maximumHeights=f);const p=e._verticesPromise=y.scheduleTask(h,l);if(!Object(s["a"])(p))return;return p.then((function(t){e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;const i=new Float64Array(t.packedBuffer),n=i[0];g(e,i),e._indices=2===u["a"].getSizeInBytes(n)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),e._ready=!0}))}}function T(e){e._ready&&!Object(s["a"])(e._primitive)&&(e._primitive=new p["a"]({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._verticesPromise=void 0)}function I(e){return new Promise((function(t,i){e._update=function(e,n){const a=v(e);e._ready&&(e._primitive.debugWireframe=e.debugWireframe,e._primitive.forceRebatch=e.forceRebatch,e._primitive.classificationType=e.classificationType,e._primitive.update(n)),Object(s["a"])(a)&&a.then((function(){T(e),t(e)})).catch((function(e){i(e)}))}}))}m.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},m.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},m.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},m.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},m.prototype.update=function(e){this._update(this,e)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(r["a"])(this)},t["a"]=m},"05e5":function(e,t,i){"use strict";const n={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1};t["a"]=Object.freeze(n)},"27aa":function(e,t,i){"use strict";var n=i("be18"),a=i("bd8d"),o=i("abab"),s=i("535a"),r=i("2f63"),c=i("7d62"),u=i("0123"),l=i("52f0"),d=i("1b8d"),h=i("f20a"),_=i("8b68"),f=i("a894"),p=i("d289"),m=i("6dc0"),b=i("e90c"),g=i("5770"),y=i("7c5e"),O=i("ae16"),v=i("8fa0"),T=i("b7c8"),I=i("5af0"),C=i("5a6c"),S=i("06f0"),x=i("6928"),w=i("3626"),A=i("6102"),P=i("25ef"),E=i("d8f6");function L(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=Object(s["a"])(e.center,n["a"].ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=a["a"].clone(a["a"].WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=Object(s["a"])(e.classificationType,C["a"].BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};const t=this._batchIds.length;for(let i=0;i<t;++i){const e=this._batchIds[i];this._batchIdLookUp[e]=i}}Object.defineProperties(L.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});const D={position:0,a_batchId:1};function j(e,t){if(Object(r["a"])(e._va))return;const i=h["a"].createVertexBuffer({context:t,typedArray:e._positions,usage:_["a"].STATIC_DRAW}),n=h["a"].createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:_["a"].STATIC_DRAW}),a=h["a"].createIndexBuffer({context:t,typedArray:e._indices,usage:_["a"].DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?u["a"].UNSIGNED_SHORT:u["a"].UNSIGNED_INT}),s=[{index:0,vertexBuffer:i,componentDatatype:o["a"].fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:n,componentDatatype:o["a"].fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new y["a"]({context:t,attributes:s,indexBuffer:a}),t.webgl2&&(e._vaSwap=new y["a"]({context:t,attributes:s,indexBuffer:h["a"].createIndexBuffer({context:t,sizeInBytes:a.sizeInBytes,usage:_["a"].DYNAMIC_DRAW,indexDatatype:a.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._verticesPromise=void 0}function N(e,t){if(Object(r["a"])(e._sp))return;const i=e._batchTable,n=Object(s["a"])(e._attributeLocations,D);let a=e._pickId;const o=e._vertexShaderSource;let c=e._fragmentShaderSource;if(Object(r["a"])(o))return e._sp=b["a"].fromCache({context:t,vertexShaderSource:o,fragmentShaderSource:c,attributeLocations:n}),e._spStencil=e._sp,c=g["a"].replaceMain(c,"czm_non_pick_main"),c=c+"void main() \n{ \n    czm_non_pick_main(); \n"+`    gl_FragColor = ${a}; \n} \n`,void(e._spPick=b["a"].fromCache({context:t,vertexShaderSource:o,fragmentShaderSource:c,attributeLocations:n}));const u=i.getVertexShaderCallback(!1,"a_batchId",void 0)(v["a"]);let l=i.getFragmentShaderCallback(!1,void 0,!0)(O["a"]);a=i.getPickId();let d=new g["a"]({sources:[u]}),h=new g["a"]({defines:["VECTOR_TILE"],sources:[l]});e._sp=b["a"].fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:n}),d=new g["a"]({sources:[v["a"]]}),h=new g["a"]({defines:["VECTOR_TILE"],sources:[O["a"]]}),e._spStencil=b["a"].fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:n}),l=g["a"].replaceMain(l,"czm_non_pick_main"),l=l+"\nvoid main() \n{ \n    czm_non_pick_main(); \n"+`    gl_FragColor = ${a}; \n} \n`;const _=new g["a"]({sources:[u]}),f=new g["a"]({defines:["VECTOR_TILE"],sources:[l]});e._spPick=b["a"].fromCache({context:t,vertexShaderSource:_,fragmentShaderSource:f,attributeLocations:n})}function k(e){const t=e?A["a"].EQUAL:A["a"].ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:P["a"].KEEP,zFail:P["a"].DECREMENT_WRAP,zPass:P["a"].KEEP},backFunction:t,backOperation:{fail:P["a"].KEEP,zFail:P["a"].INCREMENT_WRAP,zPass:P["a"].KEEP},reference:w["a"].CESIUM_3D_TILE_MASK,mask:w["a"].CESIUM_3D_TILE_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!0,func:S["a"].LESS_OR_EQUAL},depthMask:!1}}const B={stencilTest:{enabled:!0,frontFunction:A["a"].NOT_EQUAL,frontOperation:{fail:P["a"].ZERO,zFail:P["a"].ZERO,zPass:P["a"].ZERO},backFunction:A["a"].NOT_EQUAL,backOperation:{fail:P["a"].ZERO,zFail:P["a"].ZERO,zPass:P["a"].ZERO},reference:0,mask:w["a"].CLASSIFICATION_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:T["a"].PRE_MULTIPLIED_ALPHA_BLEND},F={stencilTest:{enabled:!0,frontFunction:A["a"].NOT_EQUAL,frontOperation:{fail:P["a"].ZERO,zFail:P["a"].ZERO,zPass:P["a"].ZERO},backFunction:A["a"].NOT_EQUAL,backOperation:{fail:P["a"].ZERO,zFail:P["a"].ZERO,zPass:P["a"].ZERO},reference:0,mask:w["a"].CLASSIFICATION_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function M(e){Object(r["a"])(e._rsStencilDepthPass)||(e._rsStencilDepthPass=m["a"].fromCache(k(!1)),e._rsStencilDepthPass3DTiles=m["a"].fromCache(k(!0)),e._rsColorPass=m["a"].fromCache(B),e._rsPickPass=m["a"].fromCache(F))}const R=new l["a"],H=new n["a"];function U(e,t){if(Object(r["a"])(e._uniformMap))return;const i={u_modifiedModelViewProjection:function(){const i=t.uniformState.view,n=t.uniformState.projection;return l["a"].clone(i,R),l["a"].multiplyByPoint(R,e._center,H),l["a"].setTranslation(R,H,R),l["a"].multiply(n,R,R),R},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(i)}function V(e,t,i,n,a,o,s){const r=e.constructor.BYTES_PER_ELEMENT,c=o.length;for(let u=0;u<c;++u){const c=o[u],l=s[c],d=n[l],h=a[l],_=new e.constructor(e.buffer,r*d,h);t.set(_,i),n[l]=i,i+=h}return i}function W(e,t){const i=e._indices,n=e._indexOffsets,o=e._indexCounts,s=e._batchIdLookUp,r=new i.constructor(i.length);let c=t.pop();const u=[c];let l=V(i,r,0,n,o,c.batchIds,s);c.offset=0,c.count=l;while(t.length>0){const e=t.pop();if(a["a"].equals(e.color,c.color))l=V(i,r,l,n,o,e.batchIds,s),c.batchIds=c.batchIds.concat(e.batchIds),c.count=l-c.offset;else{const t=l;l=V(i,r,l,n,o,e.batchIds,s),e.offset=t,e.count=l-t,u.push(e),c=e}}e._va.indexBuffer.copyFromArrayView(r),e._indices=r,e._batchedIndices=u}function G(e,t,i,n,a,o,s){const r=e.bytesPerIndex,c=o.length;for(let u=0;u<c;++u){const c=o[u],l=s[c],d=n[l],h=a[l];t.copyFromBuffer(e,d*r,i*r,h*r),n[l]=i,i+=h}return i}function z(e,t){const i=e._indexOffsets,n=e._indexCounts,o=e._batchIdLookUp;let s=t.pop();const r=[s],c=e._va.indexBuffer,u=e._vaSwap.indexBuffer;let l=G(c,u,0,i,n,s.batchIds,o);s.offset=0,s.count=l;while(t.length>0){const e=t.pop();if(a["a"].equals(e.color,s.color))l=G(c,u,l,i,n,e.batchIds,o),s.batchIds=s.batchIds.concat(e.batchIds),s.count=l-s.offset;else{const t=l;l=G(c,u,l,i,n,e.batchIds,o),e.offset=t,e.count=l-t,r.push(e),s=e}}const d=e._va;e._va=e._vaSwap,e._vaSwap=d,e._batchedIndices=r}function Y(e,t){return t.color.toRgba()-e.color.toRgba()}function Z(e,t){if(!e._batchDirty)return!1;const i=e._batchedIndices,n=i.length;let a=!1;const o={};for(let s=0;s<n;++s){const e=i[s].color,t=e.toRgba();if(Object(r["a"])(o[t])){a=!0;break}o[t]=!0}return a?a&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(i.sort(Y),t.webgl2?z(e,i):W(e,i),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}function X(e,t){const i=Z(e,t),n=e._commands,a=e._batchedIndices,o=a.length,c=2*o;if(Object(r["a"])(n)&&!i&&n.length===c)return;n.length=c;const u=e._va,d=e._sp,h=Object(s["a"])(e._modelMatrix,l["a"].IDENTITY),_=e._uniformMap,m=e._boundingVolume;for(let s=0;s<o;++s){const t=a[s].offset,i=a[s].count;let o=n[2*s];Object(r["a"])(o)||(o=n[2*s]=new f["a"]({owner:e})),o.vertexArray=u,o.modelMatrix=h,o.offset=t,o.count=i,o.renderState=e._rsStencilDepthPass,o.shaderProgram=d,o.uniformMap=_,o.boundingVolume=m,o.cull=!1,o.pass=p["a"].TERRAIN_CLASSIFICATION;const c=f["a"].shallowClone(o,o.derivedCommands.tileset);c.renderState=e._rsStencilDepthPass3DTiles,c.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,o.derivedCommands.tileset=c;let l=n[2*s+1];Object(r["a"])(l)||(l=n[2*s+1]=new f["a"]({owner:e})),l.vertexArray=u,l.modelMatrix=h,l.offset=t,l.count=i,l.renderState=e._rsColorPass,l.shaderProgram=d,l.uniformMap=_,l.boundingVolume=m,l.cull=!1,l.pass=p["a"].TERRAIN_CLASSIFICATION;const b=f["a"].shallowClone(l,l.derivedCommands.tileset);b.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=b}e._commandsDirty=!0}function K(e,t){if(e.classificationType===C["a"].TERRAIN||!t.invertClassification||Object(r["a"])(e._commandsIgnoreShow)&&!e._commandsDirty)return;const i=e._commands,n=e._commandsIgnoreShow,a=e._spStencil,o=i.length,s=n.length=o/2;let c=0;for(let r=0;r<s;++r){const e=n[r]=f["a"].shallowClone(i[c],n[r]);e.shaderProgram=a,e.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=2}e._commandsDirty=!1}function q(e){if(!e._pickCommandsDirty)return;const t=e._indexOffsets.length,i=e._pickCommands;i.length=2*t;const n=e._va,a=e._spStencil,o=e._spPick,c=Object(s["a"])(e._modelMatrix,l["a"].IDENTITY),u=e._uniformMap;for(let s=0;s<t;++s){const t=e._indexOffsets[s],l=e._indexCounts[s],d=Object(r["a"])(e._boundingVolumes)?e._boundingVolumes[s]:e.boundingVolume;let h=i[2*s];Object(r["a"])(h)||(h=i[2*s]=new f["a"]({owner:e,pickOnly:!0})),h.vertexArray=n,h.modelMatrix=c,h.offset=t,h.count=l,h.renderState=e._rsStencilDepthPass,h.shaderProgram=a,h.uniformMap=u,h.boundingVolume=d,h.pass=p["a"].TERRAIN_CLASSIFICATION;const _=f["a"].shallowClone(h,h.derivedCommands.tileset);_.renderState=e._rsStencilDepthPass3DTiles,_.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,h.derivedCommands.tileset=_;let m=i[2*s+1];Object(r["a"])(m)||(m=i[2*s+1]=new f["a"]({owner:e,pickOnly:!0})),m.vertexArray=n,m.modelMatrix=c,m.offset=t,m.count=l,m.renderState=e._rsPickPass,m.shaderProgram=o,m.uniformMap=u,m.boundingVolume=d,m.pass=p["a"].TERRAIN_CLASSIFICATION;const b=f["a"].shallowClone(m,m.derivedCommands.tileset);b.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,m.derivedCommands.tileset=b}e._pickCommandsDirty=!1}function J(e,t){e._updatingAllCommands=!0;const i=e._batchIds;let n,o=i.length;for(n=0;n<o;++n){const e=i[n],o=t[e];o.show=!0,o.color=a["a"].WHITE}const s=e._batchedIndices;for(o=s.length,n=0;n<o;++n)s[n].color=a["a"].clone(a["a"].WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}L.prototype.createFeatures=function(e,t){const i=this._batchIds,n=i.length;for(let a=0;a<n;++a){const n=i[a];t[n]=new I["a"](e,n)}},L.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const Q=new a["a"],$=a["a"].WHITE,ee=!0,te=/\$/;function ie(e,t,i,n){const a=e.classificationType,o=a!==C["a"].CESIUM_3D_TILE,s=a!==C["a"].TERRAIN,c=t.commandList;let u,l,d=i.length;for(l=0;l<d;++l)o&&(u=i[l],u.pass=p["a"].TERRAIN_CLASSIFICATION,c.push(u)),s&&(u=i[l].derivedCommands.tileset,u.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,c.push(u));if(t.invertClassification&&Object(r["a"])(n))for(d=n.length,l=0;l<d;++l)c.push(n[l])}function ne(e,t){const i=e.commandList,n=t.length;for(let a=0;a<n;a+=2){const e=t[a+1];e.pass=p["a"].OPAQUE,i.push(e)}}function ae(e){let t,i,n=e.debugWireframe===e._debugWireframe;if(n=n&&!(e.debugWireframe&&e._wireframeDirty),n)return;Object(r["a"])(e._rsWireframe)||(e._rsWireframe=m["a"].fromCache({})),e.debugWireframe?(t=e._rsWireframe,i=d["a"].LINES):(t=e._rsColorPass,i=d["a"].TRIANGLES);const a=e._commands,o=a.length;for(let s=0;s<o;s+=2){const e=a[s+1];e.renderState=t,e.primitiveType=i}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}L.prototype.applyStyle=function(e,t){if(!Object(r["a"])(e))return void J(this,t);const i=e.color,n=i instanceof x["a"]&&!te.test(i.expression);this._updatingAllCommands=n;const o=this._batchIds;let s,c=o.length;for(s=0;s<c;++s){const i=o[s],n=t[i];n.color=Object(r["a"])(e.color)?e.color.evaluateColor(n,Q):$,n.show=Object(r["a"])(e.show)?e.show.evaluate(n):ee}if(n){const e=this._batchedIndices;for(c=e.length,s=0;s<c;++s)e[s].color=a["a"].clone(a["a"].WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}},L.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;const i=this._batchIdLookUp,n=i[e];if(!Object(r["a"])(n))return;const o=this._indexOffsets,s=this._indexCounts,c=o[n],u=s[n],l=this._batchedIndices,d=l.length;let h;for(h=0;h<d;++h){const e=l[h].offset,t=l[h].count;if(c>=e&&c<e+t)break}l.push(new E["a"]({color:a["a"].clone(t),offset:c,count:u,batchIds:[e]}));const _=[],f=[],p=l[h].batchIds,m=p.length;for(let a=0;a<m;++a){const t=p[a];if(t===e)continue;const n=i[t];o[n]<c?_.push(t):f.push(t)}0!==f.length&&l.push(new E["a"]({color:a["a"].clone(l[h].color),offset:c+u,count:l[h].offset+l[h].count-(c+u),batchIds:f})),0!==_.length?(l[h].count=c-l[h].offset,l[h].batchIds=_):l.splice(h,1),this._batchDirty=!0},L.prototype.update=function(e){const t=e.context;j(this,t),N(this,t),M(this),U(this,t);const i=e.passes;i.render&&(X(this,t),K(this,e),ae(this),this._debugWireframe?ne(e,this._commands):ie(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(q(this),ie(this,e,this._pickCommands))},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),Object(c["a"])(this)},t["a"]=L},"364c":function(e,t,i){"use strict";var n=i("be18"),a=i("535a"),o=i("2f63"),s=i("7d62"),r=i("c52f"),c=i("e856"),u=i("abab"),l=i("93da"),d=i("52f0"),h=i("eace"),_=i("283e"),f=i("6596"),p=i("9889"),m=i("db4b"),b=i("054e"),g=i("a230"),y=i("b61c"),O=i("713c");function v(e,t,i,n,a){this._tileset=e,this._tile=t,this._resource=i,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,w(this,n,a)}function T(e){return function(t,i){Object(o["a"])(e._polygons)&&e._polygons.updateCommands(t,i)}}function I(e,t){let i,n,s,r;const c=Object(a["a"])(e.POLYGONS_LENGTH,0),u=Object(a["a"])(e.POLYLINES_LENGTH,0),l=Object(a["a"])(e.POINTS_LENGTH,0);if(c>0&&Object(o["a"])(e.POLYGON_BATCH_IDS)){const n=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,c)}if(u>0&&Object(o["a"])(e.POLYLINE_BATCH_IDS)){const i=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,u)}if(l>0&&Object(o["a"])(e.POINT_BATCH_IDS)){const i=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,i,l)}const d=Object(o["a"])(i)||Object(o["a"])(n)||Object(o["a"])(s),h=c>0&&!Object(o["a"])(i)||u>0&&!Object(o["a"])(n)||l>0&&!Object(o["a"])(s);if(d&&h)throw new _["a"]("If one group of batch ids is defined, then all batch ids must be defined.");const f=!Object(o["a"])(i)&&!Object(o["a"])(n)&&!Object(o["a"])(s);if(f){let e=0;if(!Object(o["a"])(i)&&c>0)for(i=new Uint16Array(c),r=0;r<c;++r)i[r]=e++;if(!Object(o["a"])(n)&&u>0)for(n=new Uint16Array(u),r=0;r<u;++r)n[r]=e++;if(!Object(o["a"])(s)&&l>0)for(s=new Uint16Array(l),r=0;r<l;++r)s[r]=e++}return{polygons:i,polylines:n,points:s}}Object.defineProperties(v.prototype,{featuresLength:{get:function(){return Object(o["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return Object(o["a"])(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return Object(o["a"])(this._polygons)&&(e+=this._polygons.trianglesLength),Object(o["a"])(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return Object(o["a"])(this._polygons)&&(e+=this._polygons.geometryByteLength),Object(o["a"])(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return Object(o["a"])(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return Object(o["a"])(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},readyPromise:{get:function(){const e=Object(o["a"])(this._points)?this._points.readyPromise:void 0,t=Object(o["a"])(this._polygons)?this._polygons.readyPromise:void 0,i=Object(o["a"])(this._polylines)?this._polylines.readyPromise:void 0,n=this;return Promise.all([e,t,i]).then((function(){return n}))}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const C=Uint32Array.BYTES_PER_ELEMENT;function S(e){return new g["a"](e)}function x(e){return new y["a"](e)}function w(e,t,i){i=Object(a["a"])(i,0);const s=new Uint8Array(t),g=new DataView(t);i+=C;const y=g.getUint32(i,!0);if(1!==y)throw new _["a"](`Only Vector tile version 1 is supported.  Version ${y} is not.`);i+=C;const v=g.getUint32(i,!0);if(i+=C,0===v)return Promise.resolve(e);const w=g.getUint32(i,!0);if(i+=C,0===w)throw new _["a"]("Feature table must have a byte length greater than zero");const A=g.getUint32(i,!0);i+=C;const E=g.getUint32(i,!0);i+=C;const L=g.getUint32(i,!0);i+=C;const D=g.getUint32(i,!0);i+=C;const j=g.getUint32(i,!0);i+=C;const N=g.getUint32(i,!0);i+=C;const k=g.getUint32(i,!0);i+=C;const B=Object(c["a"])(s,i,w);i+=w;const F=new Uint8Array(t,i,A);let M,R;i+=A,E>0&&(M=Object(c["a"])(s,i,E),i+=E,L>0&&(R=new Uint8Array(t,i,L),R=new Uint8Array(R),i+=L));const H=Object(a["a"])(B.POLYGONS_LENGTH,0),U=Object(a["a"])(B.POLYLINES_LENGTH,0),V=Object(a["a"])(B.POINTS_LENGTH,0),W=H+U+V,G=new f["a"](e,W,M,R,T(e));if(e._batchTable=G,0===W)return;const z=new p["a"](B,F),Y=z.getGlobalProperty("REGION");if(!Object(o["a"])(Y))throw new _["a"]("Feature table global property: REGION must be defined");const Z=h["a"].unpack(Y),X=Y[4],K=Y[5],q=e._tile.computedTransform;let J=z.getGlobalProperty("RTC_CENTER",u["a"].FLOAT,3);Object(o["a"])(J)?(J=n["a"].unpack(J),d["a"].multiplyByPoint(q,J,J)):(J=h["a"].center(Z),J.height=l["a"].lerp(X,K,.5),J=r["a"].WGS84.cartographicToCartesian(J));const Q=I(B,F);if(i+=(4-i%4)%4,H>0){z.featuresLength=H;const n=Object(a["a"])(z.getPropertyArray("POLYGON_COUNTS",u["a"].UNSIGNED_INT,1),z.getPropertyArray("POLYGON_COUNT",u["a"].UNSIGNED_INT,1));if(!Object(o["a"])(n))throw new _["a"]("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const s=Object(a["a"])(z.getPropertyArray("POLYGON_INDEX_COUNTS",u["a"].UNSIGNED_INT,1),z.getPropertyArray("POLYGON_INDEX_COUNT",u["a"].UNSIGNED_INT,1));if(!Object(o["a"])(s))throw new _["a"]("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const r=n.reduce((function(e,t){return e+2*t}),0),c=s.reduce((function(e,t){return e+t}),0),l=new Uint32Array(t,i,c);i+=D;const d=new Uint16Array(t,i,r);let h,f;i+=j,Object(o["a"])(B.POLYGON_MINIMUM_HEIGHTS)&&Object(o["a"])(B.POLYGON_MAXIMUM_HEIGHTS)&&(h=z.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",u["a"].FLOAT,1),f=z.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",u["a"].FLOAT,1)),e._polygons=new b["a"]({positions:d,counts:n,indexCounts:s,indices:l,minimumHeight:X,maximumHeight:K,polygonMinimumHeights:h,polygonMaximumHeights:f,center:J,rectangle:Z,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:G,batchIds:Q.polygons,modelMatrix:q})}if(U>0){z.featuresLength=U;const n=Object(a["a"])(z.getPropertyArray("POLYLINE_COUNTS",u["a"].UNSIGNED_INT,1),z.getPropertyArray("POLYLINE_COUNT",u["a"].UNSIGNED_INT,1));if(!Object(o["a"])(n))throw new _["a"]("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let s=z.getPropertyArray("POLYLINE_WIDTHS",u["a"].UNSIGNED_SHORT,1);if(!Object(o["a"])(s)){s=new Uint16Array(U);for(let e=0;e<U;++e)s[e]=2}const c=n.reduce((function(e,t){return e+3*t}),0),l=new Uint16Array(t,i,c);i+=N;const d=e._tileset,h=d.examineVectorLinesFunction;if(Object(o["a"])(h)){const t=Object(O["a"])(new Uint16Array(l),Z,X,K,r["a"].WGS84);P(t,n,Q.polylines,G,e.url,h)}let f=S;Object(o["a"])(d.classificationType)&&(f=x),e._polylines=f({positions:l,widths:s,counts:n,batchIds:Q.polylines,minimumHeight:X,maximumHeight:K,center:J,rectangle:Z,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:G,classificationType:d.classificationType,keepDecodedPositions:d.vectorKeepDecodedPositions})}if(V>0){const n=new Uint16Array(t,i,3*V);i+=k,e._points=new m["a"]({positions:n,batchIds:Q.points,minimumHeight:X,maximumHeight:K,rectangle:Z,batchTable:G})}return Promise.resolve(e)}function A(e){const t=e.featuresLength;if(!Object(o["a"])(e._features)&&t>0){const i=new Array(t);Object(o["a"])(e._polygons)&&e._polygons.createFeatures(e,i),Object(o["a"])(e._polylines)&&e._polylines.createFeatures(e,i),Object(o["a"])(e._points)&&e._points.createFeatures(e,i),e._features=i}}function P(e,t,i,n,a,o){const s=t.length;let r=0;for(let c=0;c<s;c++){const s=3*t[c],u=e.slice(r,r+s);r+=s,o(u,i[c],a,n)}}v.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},v.prototype.getFeature=function(e){return A(this),this._features[e]},v.prototype.applyDebugSettings=function(e,t){Object(o["a"])(this._polygons)&&this._polygons.applyDebugSettings(e,t),Object(o["a"])(this._polylines)&&this._polylines.applyDebugSettings(e,t),Object(o["a"])(this._points)&&this._points.applyDebugSettings(e,t)},v.prototype.applyStyle=function(e){A(this),Object(o["a"])(this._polygons)&&this._polygons.applyStyle(e,this._features),Object(o["a"])(this._polylines)&&this._polylines.applyStyle(e,this._features),Object(o["a"])(this._points)&&this._points.applyStyle(e,this._features)},v.prototype.update=function(e,t){let i=!0;Object(o["a"])(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),i=i&&this._polygons._ready),Object(o["a"])(this._polylines)&&(this._polylines.update(t),i=i&&this._polylines._ready),Object(o["a"])(this._points)&&(this._points.update(t),i=i&&this._points._ready),Object(o["a"])(this._batchTable)&&i&&this._batchTable.update(e,t)},v.prototype.getPolylinePositions=function(e){const t=this._polylines;if(Object(o["a"])(t))return t.getPositions(e)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(s["a"])(this)},t["a"]=v},"51a0":function(e,t,i){"use strict";var n=i("cef5"),a=i("be18"),o=i("bd8d"),s=i("535a"),r=i("2f63"),c=i("7d62"),u=i("52f0"),l=i("6a29"),d=i("5a6c"),h=i("d8f6"),_=i("27aa");function f(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,Object(r["a"])(this._center)||(Object(r["a"])(this._boundingVolume)?this._center=a["a"].clone(this._boundingVolume.center):this._center=a["a"].clone(a["a"].ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._update=function(e,t){},this._readyPromise=v(this),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=d["a"].BOTH}function p(e){const t=new Float64Array(u["a"].packedLength+a["a"].packedLength);let i=0;return a["a"].pack(e._center,t,i),i+=a["a"].packedLength,u["a"].pack(e._modelMatrix,t,i),t}function m(e,t){let i=0;const a=t[i++],s=t[i++],r=e._boundingVolumes=new Array(s);for(let o=0;o<s;++o)r[o]=n["a"].unpack(t,i),i+=n["a"].packedLength;const c=t[i++],u=e._batchedIndices=new Array(c);for(let n=0;n<c;++n){const e=o["a"].unpack(t,i);i+=o["a"].packedLength;const a=t[i++],s=t[i++],r=t[i++],c=new Array(r);for(let n=0;n<r;++n)c[n]=t[i++];u[n]=new h["a"]({color:e,offset:a,count:s,batchIds:c})}return a}Object.defineProperties(f.prototype,{trianglesLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise}}}),f.packedBoxLength=u["a"].packedLength+a["a"].packedLength,f.packedCylinderLength=u["a"].packedLength+2,f.packedEllipsoidLength=u["a"].packedLength+a["a"].packedLength,f.packedSphereLength=a["a"].packedLength+1;const b=new l["a"]("createVectorTileGeometries",5),g=new o["a"];function y(e){if(!Object(r["a"])(e._primitive)&&!Object(r["a"])(e._verticesPromise)){let t=e._boxes,i=e._boxBatchIds,n=e._cylinders,a=e._cylinderBatchIds,o=e._ellipsoids,s=e._ellipsoidBatchIds,c=e._spheres,u=e._sphereBatchIds,l=e._batchTableColors,d=e._packedBuffer;if(!Object(r["a"])(l)){let h=0;Object(r["a"])(e._boxes)&&(t=e._boxes=t.slice(),i=e._boxBatchIds=i.slice(),h+=i.length),Object(r["a"])(e._cylinders)&&(n=e._cylinders=n.slice(),a=e._cylinderBatchIds=a.slice(),h+=a.length),Object(r["a"])(e._ellipsoids)&&(o=e._ellipsoids=o.slice(),s=e._ellipsoidBatchIds=s.slice(),h+=s.length),Object(r["a"])(e._spheres)&&(c=e._sphere=c.slice(),u=e._sphereBatchIds=u.slice(),h+=u.length),l=e._batchTableColors=new Uint32Array(h);const _=e._batchTable;for(let e=0;e<h;++e){const t=_.getColor(e,g);l[e]=t.toRgba()}d=e._packedBuffer=p(e)}const h=[];Object(r["a"])(t)&&h.push(t.buffer,i.buffer),Object(r["a"])(n)&&h.push(n.buffer,a.buffer),Object(r["a"])(o)&&h.push(o.buffer,s.buffer),Object(r["a"])(c)&&h.push(c.buffer,u.buffer),h.push(l.buffer,d.buffer);const _={boxes:Object(r["a"])(t)?t.buffer:void 0,boxBatchIds:Object(r["a"])(t)?i.buffer:void 0,cylinders:Object(r["a"])(n)?n.buffer:void 0,cylinderBatchIds:Object(r["a"])(n)?a.buffer:void 0,ellipsoids:Object(r["a"])(o)?o.buffer:void 0,ellipsoidBatchIds:Object(r["a"])(o)?s.buffer:void 0,spheres:Object(r["a"])(c)?c.buffer:void 0,sphereBatchIds:Object(r["a"])(c)?u.buffer:void 0,batchTableColors:l.buffer,packedBuffer:d.buffer},f=e._verticesPromise=b.scheduleTask(_,h);if(!Object(r["a"])(f))return;return f.then((function(t){const i=new Float64Array(t.packedBuffer),n=m(e,i);e._indices=2===n?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),e._ready=!0}))}}function O(e){e._ready&&!Object(r["a"])(e._primitive)&&(e._primitive=new _["a"]({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:Object(s["a"])(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}function v(e){return new Promise((function(t,i){e._update=function(e,n){const a=y(e);e._ready&&(e._primitive.debugWireframe=e.debugWireframe,e._primitive.forceRebatch=e.forceRebatch,e._primitive.classificationType=e.classificationType,e._primitive.update(n)),Object(r["a"])(a)&&a.then((function(){O(e),t(e)})).catch((function(e){i(e)}))}}))}f.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},f.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},f.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},f.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},f.prototype.update=function(e){this._update(this,e)},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(c["a"])(this)},t["a"]=f},"619f":function(e,t,i){"use strict";var n=i("dc1c"),a=i("535a"),o=i("2f63"),s=i("55f9"),r=i("ddf7"),c=i("dd17"),u=i("3911"),l=i.n(u);function d(e,t,i,a,o,s,r,c,u,l){this._tweens=e,this._tweenjs=t,this._startObject=Object(n["a"])(i),this._stopObject=Object(n["a"])(a),this._duration=o,this._delay=s,this._easingFunction=r,this._update=c,this._complete=u,this.cancel=l,this.needsStart=!0}function h(){this._tweens=[]}Object.defineProperties(d.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),d.prototype.cancelTween=function(){this._tweens.remove(this)},Object.defineProperties(h.prototype,{length:{get:function(){return this._tweens.length}}}),h.prototype.add=function(e){if(e=Object(a["a"])(e,a["a"].EMPTY_OBJECT),0===e.duration)return Object(o["a"])(e.complete)&&e.complete(),new d(this);const t=e.duration/c["a"].SECONDS_PER_MILLISECOND,i=Object(a["a"])(e.delay,0),r=i/c["a"].SECONDS_PER_MILLISECOND,u=Object(a["a"])(e.easingFunction,s["a"].LINEAR_NONE),h=e.startObject,_=new l.a.Tween(h);_.to(Object(n["a"])(e.stopObject),t),_.delay(r),_.easing(u),Object(o["a"])(e.update)&&_.onUpdate((function(){e.update(h)})),_.onComplete(Object(a["a"])(e.complete,null)),_.repeat(Object(a["a"])(e._repeat,0));const f=new d(this,_,e.startObject,e.stopObject,e.duration,i,u,e.update,e.complete,e.cancel);return this._tweens.push(f),f},h.prototype.addProperty=function(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);const t=e.object,i=e.property,n=e.startValue,o=e.stopValue;function s(e){t[i]=e.value}return this.add({startObject:{value:n},stopObject:{value:o},duration:Object(a["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:s,complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},h.prototype.addAlpha=function(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);const t=e.material,i=[];for(const a in t.uniforms)t.uniforms.hasOwnProperty(a)&&Object(o["a"])(t.uniforms[a])&&Object(o["a"])(t.uniforms[a].alpha)&&i.push(a);function n(e){const n=i.length;for(let a=0;a<n;++a)t.uniforms[i[a]].alpha=e.alpha}return this.add({startObject:{alpha:Object(a["a"])(e.startValue,0)},stopObject:{alpha:Object(a["a"])(e.stopValue,1)},duration:Object(a["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:n,complete:e.complete,cancel:e.cancel})},h.prototype.addOffsetIncrement=function(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);const t=e.material,i=t.uniforms;return this.addProperty({object:i,property:"offset",startValue:i.offset,stopValue:i.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},h.prototype.remove=function(e){if(!Object(o["a"])(e))return!1;const t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),Object(o["a"])(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},h.prototype.removeAll=function(){const e=this._tweens;for(let t=0;t<e.length;++t){const i=e[t];i.tweenjs.stop(),Object(o["a"])(i.cancel)&&i.cancel()}e.length=0},h.prototype.contains=function(e){return Object(o["a"])(e)&&-1!==this._tweens.indexOf(e)},h.prototype.get=function(e){return this._tweens[e]},h.prototype.update=function(e){const t=this._tweens;let i=0;e=Object(o["a"])(e)?e/c["a"].SECONDS_PER_MILLISECOND:Object(r["a"])();while(i<t.length){const n=t[i],a=n.tweenjs;n.needsStart?(n.needsStart=!1,a.start(e)):a.update(e)?i++:(a.stop(),t.splice(i,1))}},t["a"]=h},a141:function(e,t,i){"use strict";var n=i("2f63");const a={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID"};function o(e){switch(e){case a.POSITION:return"positionMC";case a.NORMAL:return"normalMC";case a.TANGENT:return"tangentMC";case a.TEXCOORD:return"texCoord";case a.COLOR:return"color";case a.JOINTS:return"joints";case a.WEIGHTS:return"weights";case a.FEATURE_ID:return"featureId"}}a.hasSetIndex=function(e){switch(e){case a.POSITION:case a.NORMAL:case a.TANGENT:return!1;case a.TEXCOORD:case a.COLOR:case a.JOINTS:case a.WEIGHTS:case a.FEATURE_ID:return!0}},a.fromGltfSemantic=function(e){let t=e;const i=/^(\w+)_\d+$/,n=i.exec(e);switch(null!==n&&(t=n[1]),t){case"POSITION":return a.POSITION;case"NORMAL":return a.NORMAL;case"TANGENT":return a.TANGENT;case"TEXCOORD":return a.TEXCOORD;case"COLOR":return a.COLOR;case"JOINTS":return a.JOINTS;case"WEIGHTS":return a.WEIGHTS;case"_FEATURE_ID":return a.FEATURE_ID}},a.fromPntsSemantic=function(e){switch(e){case"POSITION":case"POSITION_QUANTIZED":return a.POSITION;case"RGBA":case"RGB":case"RGB565":return a.COLOR;case"NORMAL":case"NORMAL_OCT16P":return a.NORMAL;case"BATCH_ID":return a.FEATURE_ID}},a.getGlslType=function(e){switch(e){case a.POSITION:case a.NORMAL:case a.TANGENT:return"vec3";case a.TEXCOORD:return"vec2";case a.COLOR:return"vec4";case a.JOINTS:return"ivec4";case a.WEIGHTS:return"vec4";case a.FEATURE_ID:return"int"}},a.getVariableName=function(e,t){let i=o(e);return Object(n["a"])(t)&&(i+="_"+t),i},t["a"]=Object.freeze(a)},a230:function(e,t,i){"use strict";var n=i("be18"),a=i("bd8d"),o=i("abab"),s=i("535a"),r=i("2f63"),c=i("7d62"),u=i("c52f"),l=i("5e57"),d=i("0123"),h=i("52f0"),_=i("eace"),f=i("6a29"),p=i("f20a"),m=i("8b68"),b=i("a894"),g=i("d289"),y=i("6dc0"),O=i("e90c"),v=i("5770"),T=i("7c5e"),I=i("b71e"),C=i("95fe"),S=i("b7c8"),x=i("5af0");function w(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(s["a"])(e.ellipsoid,u["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=a["a"].clone(a["a"].WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._update=function(e,t){},this._readyPromise=G(this),this._verticesPromise=void 0}function A(e){const t=e._rectangle,i=e._minimumHeight,a=e._maximumHeight,o=e._ellipsoid,s=e._center,r=2+_["a"].packedLength+u["a"].packedLength+n["a"].packedLength,c=new Float64Array(r);let l=0;return c[l++]=i,c[l++]=a,_["a"].pack(t,c,l),l+=_["a"].packedLength,u["a"].pack(o,c,l),l+=u["a"].packedLength,n["a"].pack(s,c,l),c}Object.defineProperties(w.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise}}});const P=new f["a"]("createVectorTilePolylines",5),E={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function L(e,t){if(!Object(r["a"])(e._va)&&!Object(r["a"])(e._verticesPromise)){let t=e._positions,i=e._widths,n=e._counts,a=e._transferrableBatchIds,o=e._packedBuffer;Object(r["a"])(o)||(t=e._positions=t.slice(),i=e._widths=i.slice(),n=e._counts=n.slice(),a=e._transferrableBatchIds=e._batchIds.slice(),o=e._packedBuffer=A(e));const s=[t.buffer,i.buffer,n.buffer,a.buffer,o.buffer],c={positions:t.buffer,widths:i.buffer,counts:n.buffer,batchIds:a.buffer,packedBuffer:o.buffer,keepDecodedPositions:e._keepDecodedPositions},u=e._verticesPromise=P.scheduleTask(c,s);if(!Object(r["a"])(u))return;return u.then((function(t){e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(t.decodedPositions),e._decodedPositionOffsets=new Uint32Array(t.decodedPositionOffsets)),e._currentPositions=new Float32Array(t.currentPositions),e._previousPositions=new Float32Array(t.previousPositions),e._nextPositions=new Float32Array(t.nextPositions),e._expandAndWidth=new Float32Array(t.expandAndWidth),e._vertexBatchIds=new Uint16Array(t.batchIds);const i=t.indexDatatype;e._indices=i===d["a"].UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0}))}}function D(e,t){if(e._ready&&!Object(r["a"])(e._va)){const i=e._currentPositions,n=e._previousPositions,a=e._nextPositions,s=e._expandAndWidth,r=e._vertexBatchIds,c=e._indices;let u=n.byteLength+i.byteLength+a.byteLength;u+=s.byteLength+r.byteLength+c.byteLength,e._trianglesLength=c.length/3,e._geometryByteLength=u;const l=p["a"].createVertexBuffer({context:t,typedArray:n,usage:m["a"].STATIC_DRAW}),h=p["a"].createVertexBuffer({context:t,typedArray:i,usage:m["a"].STATIC_DRAW}),_=p["a"].createVertexBuffer({context:t,typedArray:a,usage:m["a"].STATIC_DRAW}),f=p["a"].createVertexBuffer({context:t,typedArray:s,usage:m["a"].STATIC_DRAW}),b=p["a"].createVertexBuffer({context:t,typedArray:r,usage:m["a"].STATIC_DRAW}),g=p["a"].createIndexBuffer({context:t,typedArray:c,usage:m["a"].STATIC_DRAW,indexDatatype:2===c.BYTES_PER_ELEMENT?d["a"].UNSIGNED_SHORT:d["a"].UNSIGNED_INT}),y=[{index:E.previousPosition,vertexBuffer:l,componentDatatype:o["a"].FLOAT,componentsPerAttribute:3},{index:E.currentPosition,vertexBuffer:h,componentDatatype:o["a"].FLOAT,componentsPerAttribute:3},{index:E.nextPosition,vertexBuffer:_,componentDatatype:o["a"].FLOAT,componentsPerAttribute:3},{index:E.expandAndWidth,vertexBuffer:f,componentDatatype:o["a"].FLOAT,componentsPerAttribute:2},{index:E.a_batchId,vertexBuffer:b,componentDatatype:o["a"].UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new T["a"]({context:t,attributes:y,indexBuffer:g}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}const j=new h["a"],N=new n["a"];function k(e,t){Object(r["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const i=t.uniformState.view;return h["a"].clone(i,j),h["a"].multiplyByPoint(j,e._center,N),h["a"].setTranslation(j,N,j),j},u_highlightColor:function(){return e._highlightColor}})}function B(e){if(Object(r["a"])(e._rs))return;const t={enabled:!0,factor:-5,units:-5};e._rs=y["a"].fromCache({blending:S["a"].ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}const F="uniform vec4 u_highlightColor; \nvoid main()\n{\n    gl_FragColor = u_highlightColor;\n}\n";function M(e,t){if(Object(r["a"])(e._sp))return;const i=e._batchTable,n=i.getVertexShaderCallback(!1,"a_batchId",void 0)(C["a"]),a=i.getFragmentShaderCallback(!1,void 0,!1)(F),o=new v["a"]({defines:["VECTOR_TILE",l["a"].isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[I["a"],n]}),s=new v["a"]({defines:["VECTOR_TILE"],sources:[a]});e._sp=O["a"].fromCache({context:t,vertexShaderSource:o,fragmentShaderSource:s,attributeLocations:E})}function R(e,t){if(!Object(r["a"])(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new b["a"]({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:g["a"].TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}function H(e,t){const i=e._batchIds,n=i.length;for(let o=0;o<n;++o){const e=i[o],n=t[e];n.show=!0,n.color=a["a"].WHITE}}w.getPolylinePositions=function(e,t){const i=e._batchIds,n=e._decodedPositions,a=e._decodedPositionOffsets;if(!Object(r["a"])(i)||!Object(r["a"])(n))return;let o,s;const c=i.length;let u=0,l=0;for(o=0;o<c;++o)i[o]===t&&(u+=a[o+1]-a[o]);if(0===u)return;const d=new Float64Array(3*u);for(o=0;o<c;++o)if(i[o]===t){const e=a[o],t=a[o+1]-e;for(s=0;s<t;++s){const t=3*(e+s);d[l++]=n[t],d[l++]=n[t+1],d[l++]=n[t+2]}}return d},w.prototype.getPositions=function(e){return w.getPolylinePositions(this,e)},w.prototype.createFeatures=function(e,t){const i=this._batchIds,n=i.length;for(let a=0;a<n;++a){const n=i[a];t[n]=new x["a"](e,n)}},w.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const U=new a["a"],V=a["a"].WHITE,W=!0;function G(e){return new Promise((function(t,i){e._update=function(e,n){const a=n.context,o=L(e,a);if(k(e,a),M(e,a),B(e),e._ready){const t=n.passes;(t.render||t.pick)&&R(e,n)}Object(r["a"])(o)&&o.then((function(){D(e,a),t()})).catch((function(e){i(e)}))}}))}w.prototype.applyStyle=function(e,t){if(!Object(r["a"])(e))return void H(this,t);const i=this._batchIds,n=i.length;for(let a=0;a<n;++a){const n=i[a],o=t[n];o.color=Object(r["a"])(e.color)?e.color.evaluateColor(o,U):V,o.show=Object(r["a"])(e.show)?e.show.evaluate(o):W}},w.prototype.update=function(e){this._update(this,e)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Object(c["a"])(this)},t["a"]=w},b61c:function(e,t,i){"use strict";var n=i("dd06"),a=i("670c"),o=i("be18"),s=i("bd8d"),r=i("abab"),c=i("535a"),u=i("2f63"),l=i("7d62"),d=i("c52f"),h=i("5e57"),_=i("0123"),f=i("78e5"),p=i("52f0"),m=i("eace"),b=i("6a29"),g=i("f20a"),y=i("8b68"),O=i("a894"),v=i("d289"),T=i("6dc0"),I=i("e90c"),C=i("5770"),S=i("7c5e"),x=i("b71e"),w=i("28ac"),A=i("3e7b"),P=i("b7c8"),E=i("5af0"),L=i("5a6c"),D=i("29ab"),j=i("3626"),N=i("6102"),k=i("25ef"),B=i("a230");function F(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(c["a"])(e.ellipsoid,d["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new a["a"](n["a"]._defaultMinTerrainHeight,n["a"]._defaultMaxTerrainHeight),this._boundingVolume=f["a"].fromRectangle(e.rectangle,n["a"]._defaultMinTerrainHeight,n["a"]._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=s["a"].clone(s["a"].WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._update=function(e,t){},this._readyPromise=te(this),this._verticesPromise=void 0}function M(e,t,i){const a=n["a"].getMinimumMaximumHeights(t,i),o=a.minimumTerrainHeight,s=a.maximumTerrainHeight,r=e._minimumMaximumVectorHeights;r.x=o,r.y=s;const c=e._boundingVolume,u=e._rectangle;f["a"].fromRectangle(u,o,s,i,c)}function R(e){const t=e._rectangle,i=e._minimumHeight,n=e._maximumHeight,a=e._ellipsoid,s=e._center,r=2+m["a"].packedLength+d["a"].packedLength+o["a"].packedLength,c=new Float64Array(r);let u=0;return c[u++]=i,c[u++]=n,m["a"].pack(t,c,u),u+=m["a"].packedLength,d["a"].pack(a,c,u),u+=d["a"].packedLength,o["a"].pack(s,c,u),c}Object.defineProperties(F.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise}}});const H=new b["a"]("createVectorTileClampedPolylines"),U={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function V(e,t){if(!Object(u["a"])(e._va)&&!Object(u["a"])(e._verticesPromise)){let t=e._positions,i=e._widths,n=e._counts,a=e._transferrableBatchIds,o=e._packedBuffer;Object(u["a"])(o)||(t=e._positions=t.slice(),i=e._widths=i.slice(),n=e._counts=n.slice(),a=e._transferrableBatchIds=e._batchIds.slice(),o=e._packedBuffer=R(e));const s=[t.buffer,i.buffer,n.buffer,a.buffer,o.buffer],r={positions:t.buffer,widths:i.buffer,counts:n.buffer,batchIds:a.buffer,packedBuffer:o.buffer,keepDecodedPositions:e._keepDecodedPositions},c=e._verticesPromise=H.scheduleTask(r,s);if(!Object(u["a"])(c))return;return c.then((function(t){e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(t.decodedPositions),e._decodedPositionOffsets=new Uint32Array(t.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(t.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(t.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(t.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(t.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(t.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(t.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds);const i=t.indexDatatype;e._indices=i===_["a"].UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0}))}}function W(e,t){if(e._ready&&!Object(u["a"])(e._va)){const i=e._startEllipsoidNormals,n=e._endEllipsoidNormals,a=e._startPositionAndHeights,o=e._endPositionAndHeights,s=e._startFaceNormalAndVertexCornerIds,c=e._endFaceNormalAndHalfWidths,u=e._vertexBatchIds,l=e._indices;let d=i.byteLength+n.byteLength;d+=a.byteLength+o.byteLength,d+=s.byteLength+c.byteLength,d+=u.byteLength+l.byteLength,e._trianglesLength=l.length/3,e._geometryByteLength=d;const h=g["a"].createVertexBuffer({context:t,typedArray:i,usage:y["a"].STATIC_DRAW}),f=g["a"].createVertexBuffer({context:t,typedArray:n,usage:y["a"].STATIC_DRAW}),p=g["a"].createVertexBuffer({context:t,typedArray:a,usage:y["a"].STATIC_DRAW}),m=g["a"].createVertexBuffer({context:t,typedArray:o,usage:y["a"].STATIC_DRAW}),b=g["a"].createVertexBuffer({context:t,typedArray:s,usage:y["a"].STATIC_DRAW}),O=g["a"].createVertexBuffer({context:t,typedArray:c,usage:y["a"].STATIC_DRAW}),v=g["a"].createVertexBuffer({context:t,typedArray:u,usage:y["a"].STATIC_DRAW}),T=g["a"].createIndexBuffer({context:t,typedArray:l,usage:y["a"].STATIC_DRAW,indexDatatype:2===l.BYTES_PER_ELEMENT?_["a"].UNSIGNED_SHORT:_["a"].UNSIGNED_INT}),I=[{index:U.startEllipsoidNormal,vertexBuffer:h,componentDatatype:r["a"].FLOAT,componentsPerAttribute:3},{index:U.endEllipsoidNormal,vertexBuffer:f,componentDatatype:r["a"].FLOAT,componentsPerAttribute:3},{index:U.startPositionAndHeight,vertexBuffer:p,componentDatatype:r["a"].FLOAT,componentsPerAttribute:4},{index:U.endPositionAndHeight,vertexBuffer:m,componentDatatype:r["a"].FLOAT,componentsPerAttribute:4},{index:U.startFaceNormalAndVertexCorner,vertexBuffer:b,componentDatatype:r["a"].FLOAT,componentsPerAttribute:4},{index:U.endFaceNormalAndHalfWidth,vertexBuffer:O,componentDatatype:r["a"].FLOAT,componentsPerAttribute:4},{index:U.a_batchId,vertexBuffer:v,componentDatatype:r["a"].UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new S["a"]({context:t,attributes:I,indexBuffer:T}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}const G=new p["a"],z=new o["a"];function Y(e,t){Object(u["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const i=t.uniformState.view;return p["a"].clone(i,G),p["a"].multiplyByPoint(G,e._center,z),p["a"].setTranslation(G,z,G),G},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function Z(e){return T["a"].fromCache({cull:{enabled:!0,face:D["a"].FRONT},blending:P["a"].PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:N["a"].EQUAL,frontOperation:{fail:k["a"].KEEP,zFail:k["a"].KEEP,zPass:k["a"].KEEP},backFunction:N["a"].EQUAL,backOperation:{fail:k["a"].KEEP,zFail:k["a"].KEEP,zPass:k["a"].KEEP},reference:j["a"].CESIUM_3D_TILE_MASK,mask:j["a"].CESIUM_3D_TILE_MASK}})}function X(e){Object(u["a"])(e._rs)||(e._rs=Z(!1),e._rs3DTiles=Z(!0))}function K(e,t){if(Object(u["a"])(e._sp))return;const i=e._batchTable,n=i.getVertexShaderCallback(!1,"a_batchId",void 0)(w["a"]),a=i.getFragmentShaderCallback(!1,void 0,!0)(A["a"]),o=new C["a"]({defines:["VECTOR_TILE",h["a"].isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[x["a"],n]}),s=new C["a"]({defines:["VECTOR_TILE"],sources:[a]});e._sp=I["a"].fromCache({context:t,vertexShaderSource:o,fragmentShaderSource:s,attributeLocations:U})}function q(e,t){let i=e._command;if(!Object(u["a"])(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);i=e._command=new O["a"]({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:v["a"].TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});const n=O["a"].shallowClone(i,i.derivedCommands.tileset);n.renderState=e._rs3DTiles,n.pass=v["a"].CESIUM_3D_TILE_CLASSIFICATION,i.derivedCommands.tileset=n}const n=e._classificationType;n!==L["a"].TERRAIN&&n!==L["a"].BOTH||t.commandList.push(i),n!==L["a"].CESIUM_3D_TILE&&n!==L["a"].BOTH||t.commandList.push(i.derivedCommands.tileset)}function J(e,t){const i=e._batchIds,n=i.length;for(let a=0;a<n;++a){const e=i[a],n=t[e];n.show=!0,n.color=s["a"].WHITE}}F.prototype.getPositions=function(e){return B["a"].getPolylinePositions(this,e)},F.prototype.createFeatures=function(e,t){const i=this._batchIds,n=i.length;for(let a=0;a<n;++a){const n=i[a];t[n]=new E["a"](e,n)}},F.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const Q=new s["a"],$=s["a"].WHITE,ee=!0;function te(e){return n["a"].initialize().then((function(){return M(e,e._rectangle,e._ellipsoid),new Promise((function(t,i){e._update=function(e,n){const a=n.context,o=V(e,a);if(Y(e,a),K(e,a),X(e),e._ready){const t=n.passes;(t.render||t.pick)&&q(e,n)}Object(u["a"])(o)&&o.then((function(){W(e,a),t(e)})).catch((function(e){i(e)}))}}))}))}F.prototype.applyStyle=function(e,t){if(!Object(u["a"])(e))return void J(this,t);const i=this._batchIds,n=i.length;for(let a=0;a<n;++a){const n=i[a],o=t[n];o.color=Object(u["a"])(e.color)?e.color.evaluateColor(o,Q):$,o.show=Object(u["a"])(e.show)?e.show.evaluate(o):ee}},F.prototype.update=function(e){this._update(this,e)},F.prototype.isDestroyed=function(){return!1},F.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Object(l["a"])(this)},t["a"]=F},d8f6:function(e,t,i){"use strict";function n(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}t["a"]=n},db4b:function(e,t,i){"use strict";var n=i("670c"),a=i("be18"),o=i("bd8d"),s=i("2f63"),r=i("7d62"),c=i("aee6"),u=i("c52f"),l=i("6dfc"),d=i("eace"),h=i("6a29"),_=i("8f7c"),f=i("7950"),p=i("f61d"),m=i("04e1"),b=i("4626"),g=i("4082"),y=i("05e5");function O(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=new _["a"]({batchTable:e.batchTable}),this._labelCollection=new m["a"]({batchTable:e.batchTable}),this._polylineCollection=new g["a"],this._polylineCollection._useHighlightColor=!0,this._verticesPromise=void 0,this._packedBuffer=void 0,this._ready=!1,this._update=function(e,t){},this._readyPromise=k(this)}function v(e,t){const i=e._rectangle,n=e._minHeight,a=e._maxHeight,o=2+d["a"].packedLength+u["a"].packedLength,s=new Float64Array(o);let r=0;return s[r++]=n,s[r++]=a,d["a"].pack(i,s,r),r+=d["a"].packedLength,u["a"].pack(t,s,r),s}Object.defineProperties(O.prototype,{pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){const e=this._billboardCollection.textureAtlas.texture.sizeInBytes,t=this._labelCollection._textureAtlas.texture.sizeInBytes;return e+t}},readyPromise:{get:function(){return this._readyPromise}}});const T=new h["a"]("createVectorTilePoints",5),I=new a["a"];function C(e,t){let i;if(!Object(s["a"])(e._verticesPromise)){i=e._positions;let n=e._packedBuffer;Object(s["a"])(n)||(i=e._positions=i.slice(),e._batchIds=e._batchIds.slice(),n=e._packedBuffer=v(e,t));const o=[i.buffer,n.buffer],r={positions:i.buffer,packedBuffer:n.buffer},c=e._verticesPromise=T.scheduleTask(r,o);if(!Object(s["a"])(c))return;return c.then((function(t){e._positions=new Float64Array(t.positions);const n=e._billboardCollection,o=e._labelCollection,s=e._polylineCollection;i=e._positions;const r=e._batchIds,c=i.length/3;for(let e=0;e<c;++e){const t=r[e],c=a["a"].unpack(i,3*e,I),u=n.add();u.position=c,u._batchIndex=t;const l=o.add();l.text=" ",l.position=c,l._batchIndex=t;const d=s.add();d.positions=[a["a"].clone(c),a["a"].clone(c)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0}))}}function S(e,t){const i=e._batchIds,a=i.length;for(let s=0;s<a;++s){const e=i[s],a=t[e];a.show=!0,a.pointSize=f["a"].defaultPointSize,a.color=f["a"].defaultColor,a.pointOutlineColor=f["a"].defaultPointOutlineColor,a.pointOutlineWidth=f["a"].defaultPointOutlineWidth,a.labelColor=o["a"].WHITE,a.labelOutlineColor=o["a"].WHITE,a.labelOutlineWidth=1,a.font="30px sans-serif",a.labelStyle=b["a"].FILL,a.labelText=void 0,a.backgroundColor=new o["a"](.165,.165,.165,.8),a.backgroundPadding=new n["a"](7,5),a.backgroundEnabled=!1,a.scaleByDistance=void 0,a.translucencyByDistance=void 0,a.distanceDisplayCondition=void 0,a.heightOffset=0,a.anchorLineEnabled=!1,a.anchorLineColor=o["a"].WHITE,a.image=void 0,a.disableDepthTestDistance=0,a.horizontalOrigin=p["a"].CENTER,a.verticalOrigin=y["a"].CENTER,a.labelHorizontalOrigin=p["a"].RIGHT,a.labelVerticalOrigin=y["a"].BASELINE}}O.prototype.createFeatures=function(e,t){const i=this._billboardCollection,n=this._labelCollection,a=this._polylineCollection,o=this._batchIds,s=o.length;for(let r=0;r<s;++r){const s=o[r],c=i.get(r),u=n.get(r),l=a.get(r);t[s]=new f["a"](e,s,c,u,l)}},O.prototype.applyDebugSettings=function(e,t){e?(o["a"].clone(t,this._billboardCollection._highlightColor),o["a"].clone(t,this._labelCollection._highlightColor),o["a"].clone(t,this._polylineCollection._highlightColor)):(o["a"].clone(o["a"].WHITE,this._billboardCollection._highlightColor),o["a"].clone(o["a"].WHITE,this._labelCollection._highlightColor),o["a"].clone(o["a"].WHITE,this._polylineCollection._highlightColor))};const x=new o["a"],w=new o["a"],A=new o["a"],P=new o["a"],E=new o["a"],L=new o["a"],D=new l["a"],j=new l["a"],N=new c["a"];function k(e){return new Promise((function(t,i){e._update=function(e,n){const a=C(e,n.mapProjection.ellipsoid);e._ready&&(e._polylineCollection.update(n),e._billboardCollection.update(n),e._labelCollection.update(n)),Object(s["a"])(a)&&a.then((function(){t()})).catch((function(e){i(e)}))}}))}O.prototype.applyStyle=function(e,t){if(!Object(s["a"])(e))return void S(this,t);const i=this._batchIds,n=i.length;for(let a=0;a<n;++a){const n=i[a],o=t[n];if(Object(s["a"])(e.show)&&(o.show=e.show.evaluate(o)),Object(s["a"])(e.pointSize)&&(o.pointSize=e.pointSize.evaluate(o)),Object(s["a"])(e.color)&&(o.color=e.color.evaluateColor(o,x)),Object(s["a"])(e.pointOutlineColor)&&(o.pointOutlineColor=e.pointOutlineColor.evaluateColor(o,w)),Object(s["a"])(e.pointOutlineWidth)&&(o.pointOutlineWidth=e.pointOutlineWidth.evaluate(o)),Object(s["a"])(e.labelColor)&&(o.labelColor=e.labelColor.evaluateColor(o,A)),Object(s["a"])(e.labelOutlineColor)&&(o.labelOutlineColor=e.labelOutlineColor.evaluateColor(o,P)),Object(s["a"])(e.labelOutlineWidth)&&(o.labelOutlineWidth=e.labelOutlineWidth.evaluate(o)),Object(s["a"])(e.font)&&(o.font=e.font.evaluate(o)),Object(s["a"])(e.labelStyle)&&(o.labelStyle=e.labelStyle.evaluate(o)),Object(s["a"])(e.labelText)?o.labelText=e.labelText.evaluate(o):o.labelText=void 0,Object(s["a"])(e.backgroundColor)&&(o.backgroundColor=e.backgroundColor.evaluateColor(o,E)),Object(s["a"])(e.backgroundPadding)&&(o.backgroundPadding=e.backgroundPadding.evaluate(o)),Object(s["a"])(e.backgroundEnabled)&&(o.backgroundEnabled=e.backgroundEnabled.evaluate(o)),Object(s["a"])(e.scaleByDistance)){const t=e.scaleByDistance.evaluate(o);D.near=t.x,D.nearValue=t.y,D.far=t.z,D.farValue=t.w,o.scaleByDistance=D}else o.scaleByDistance=void 0;if(Object(s["a"])(e.translucencyByDistance)){const t=e.translucencyByDistance.evaluate(o);j.near=t.x,j.nearValue=t.y,j.far=t.z,j.farValue=t.w,o.translucencyByDistance=j}else o.translucencyByDistance=void 0;if(Object(s["a"])(e.distanceDisplayCondition)){const t=e.distanceDisplayCondition.evaluate(o);N.near=t.x,N.far=t.y,o.distanceDisplayCondition=N}else o.distanceDisplayCondition=void 0;Object(s["a"])(e.heightOffset)&&(o.heightOffset=e.heightOffset.evaluate(o)),Object(s["a"])(e.anchorLineEnabled)&&(o.anchorLineEnabled=e.anchorLineEnabled.evaluate(o)),Object(s["a"])(e.anchorLineColor)&&(o.anchorLineColor=e.anchorLineColor.evaluateColor(o,L)),Object(s["a"])(e.image)?o.image=e.image.evaluate(o):o.image=void 0,Object(s["a"])(e.disableDepthTestDistance)&&(o.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(o)),Object(s["a"])(e.horizontalOrigin)&&(o.horizontalOrigin=e.horizontalOrigin.evaluate(o)),Object(s["a"])(e.verticalOrigin)&&(o.verticalOrigin=e.verticalOrigin.evaluate(o)),Object(s["a"])(e.labelHorizontalOrigin)&&(o.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(o)),Object(s["a"])(e.labelVerticalOrigin)&&(o.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(o))}},O.prototype.update=function(e){this._update(this,e)},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),Object(r["a"])(this)},t["a"]=O},e288:function(e,t,i){"use strict";var n=i("670c"),a=i("be18"),o=i("bef8"),s=i("2bb9"),r=i("8dfe"),c=i("535a"),u=i("2f63"),l=i("21d7"),d=i("3d7f"),h=i("93da"),_=i("eace"),f=i("d4ed"),p=i("d3a0"),m=i("64ac");const b=/{[^}]+}/g,g={x:L,y:j,z:B,s:F,reverseX:D,reverseY:N,reverseZ:k,westDegrees:R,southDegrees:H,eastDegrees:U,northDegrees:V,westProjected:G,southProjected:z,eastProjected:Y,northProjected:Z,width:X,height:K},y=Object(s["a"])(g,{i:q,j:J,reverseI:Q,reverseJ:$,longitudeDegrees:ne,latitudeDegrees:ae,longitudeProjected:oe,latitudeProjected:se,format:ue});function O(e){this._errorEvent=new l["a"],this._resource=void 0,this._urlSchemeZeroPadding=void 0,this._pickFeaturesResource=void 0,this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._minimumLevel=void 0,this._tilingScheme=void 0,this._rectangle=void 0,this._tileDiscardPolicy=void 0,this._credit=void 0,this._hasAlphaChannel=void 0,this._readyPromise=void 0,this._tags=void 0,this._pickFeaturesTags=void 0,this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this.enablePickFeatures=!0,this.reinitialize(e)}Object.defineProperties(O.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return Object(u["a"])(this._resource)}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}}),O.prototype.reinitialize=function(e){const t=this;t._readyPromise=Promise.resolve(e).then((function(e){const i=e.customTags,n=Object(s["a"])(g,i),a=Object(s["a"])(y,i),o=f["a"].createIfNeeded(e.url),l=f["a"].createIfNeeded(e.pickFeaturesUrl);t.enablePickFeatures=Object(c["a"])(e.enablePickFeatures,t.enablePickFeatures),t._urlSchemeZeroPadding=Object(c["a"])(e.urlSchemeZeroPadding,t.urlSchemeZeroPadding),t._tileDiscardPolicy=e.tileDiscardPolicy,t._getFeatureInfoFormats=e.getFeatureInfoFormats,t._subdomains=e.subdomains,Array.isArray(t._subdomains)?t._subdomains=t._subdomains.slice():Object(u["a"])(t._subdomains)&&t._subdomains.length>0?t._subdomains=t._subdomains.split(""):t._subdomains=["a","b","c"],t._tileWidth=Object(c["a"])(e.tileWidth,256),t._tileHeight=Object(c["a"])(e.tileHeight,256),t._minimumLevel=Object(c["a"])(e.minimumLevel,0),t._maximumLevel=e.maximumLevel,t._tilingScheme=Object(c["a"])(e.tilingScheme,new p["a"]({ellipsoid:e.ellipsoid})),t._rectangle=Object(c["a"])(e.rectangle,t._tilingScheme.rectangle),t._rectangle=_["a"].intersection(t._rectangle,t._tilingScheme.rectangle),t._hasAlphaChannel=Object(c["a"])(e.hasAlphaChannel,!0);let d=e.credit;return"string"===typeof d&&(d=new r["a"](d)),t._credit=d,t._resource=o,t._tags=n,t._pickFeaturesResource=l,t._pickFeaturesTags=a,!0}))},O.prototype.getTileCredits=function(e,t,i){},O.prototype.requestImage=function(e,t,i,n){return m["a"].loadImage(this,S(this,e,t,i,n))},O.prototype.pickFeatures=function(e,t,i,n,a){if(!this.enablePickFeatures||!Object(u["a"])(this._pickFeaturesResource)||0===this._getFeatureInfoFormats.length)return;let o=0;const s=this;function r(e,t){return e.callback(t)}function c(){if(o>=s._getFeatureInfoFormats.length)return Promise.resolve([]);const u=s._getFeatureInfoFormats[o],l=P(s,e,t,i,n,a,u.format);return++o,"json"===u.type?l.fetchJson().then(u.callback).catch(c):"xml"===u.type?l.fetchXML().then(u.callback).catch(c):"text"===u.type||"html"===u.type?l.fetchText().then(u.callback).catch(c):l.fetch({responseType:u.format}).then(r.bind(void 0,u)).catch(c)}return c()};let v=!1;const T=new _["a"];let I=!1;const C=new _["a"];function S(e,t,i,n,a){v=!1,I=!1;const o=e._resource,s=o.getUrlComponent(!0),r=e._tags,c={},l=s.match(b);return Object(u["a"])(l)&&l.forEach((function(a){const o=a.substring(1,a.length-1);Object(u["a"])(r[o])&&(c[o]=r[o](e,t,i,n))})),o.getDerivedResource({request:a,templateValues:c})}let x=!1;const w=new n["a"];let A=!1;function P(e,t,i,n,a,o,s){v=!1,I=!1,x=!1,A=!1;const r=e._pickFeaturesResource,c=r.getUrlComponent(!0),l=e._pickFeaturesTags,d={},h=c.match(b);return Object(u["a"])(h)&&h.forEach((function(r){const c=r.substring(1,r.length-1);Object(u["a"])(l[c])&&(d[c]=l[c](e,t,i,n,a,o,s))})),r.getDerivedResource({templateValues:d})}function E(e,t,i){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){const n=e.urlSchemeZeroPadding[t];if("string"===typeof n){const e=n.length;e>1&&(i=i.length>=e?i:new Array(e-i.toString().length+1).join("0")+i)}}return i}function L(e,t,i,n){return E(e,"{x}",t)}function D(e,t,i,n){const a=e.tilingScheme.getNumberOfXTilesAtLevel(n)-t-1;return E(e,"{reverseX}",a)}function j(e,t,i,n){return E(e,"{y}",i)}function N(e,t,i,n){const a=e.tilingScheme.getNumberOfYTilesAtLevel(n)-i-1;return E(e,"{reverseY}",a)}function k(e,t,i,n){const a=e.maximumLevel,o=Object(u["a"])(a)&&n<a?a-n-1:n;return E(e,"{reverseZ}",o)}function B(e,t,i,n){return E(e,"{z}",n)}function F(e,t,i,n){const a=(t+i+n)%e._subdomains.length;return e._subdomains[a]}function M(e,t,i,n){v||(e.tilingScheme.tileXYToRectangle(t,i,n,T),T.west=h["a"].toDegrees(T.west),T.south=h["a"].toDegrees(T.south),T.east=h["a"].toDegrees(T.east),T.north=h["a"].toDegrees(T.north),v=!0)}function R(e,t,i,n){return M(e,t,i,n),T.west}function H(e,t,i,n){return M(e,t,i,n),T.south}function U(e,t,i,n){return M(e,t,i,n),T.east}function V(e,t,i,n){return M(e,t,i,n),T.north}function W(e,t,i,n){I||(e.tilingScheme.tileXYToNativeRectangle(t,i,n,C),I=!0)}function G(e,t,i,n){return W(e,t,i,n),C.west}function z(e,t,i,n){return W(e,t,i,n),C.south}function Y(e,t,i,n){return W(e,t,i,n),C.east}function Z(e,t,i,n){return W(e,t,i,n),C.north}function X(e,t,i,n){return e.tileWidth}function K(e,t,i,n){return e.tileHeight}function q(e,t,i,n,a,o,s){return ie(e,t,i,n,a,o),w.x}function J(e,t,i,n,a,o,s){return ie(e,t,i,n,a,o),w.y}function Q(e,t,i,n,a,o,s){return ie(e,t,i,n,a,o),e.tileWidth-w.x-1}function $(e,t,i,n,a,o,s){return ie(e,t,i,n,a,o),e.tileHeight-w.y-1}const ee=new _["a"],te=new a["a"];function ie(e,t,i,n,a,o,s){if(x)return;ce(e,t,i,n,a,o);const r=te,c=e.tilingScheme.tileXYToNativeRectangle(t,i,n,ee);w.x=e.tileWidth*(r.x-c.west)/c.width|0,w.y=e.tileHeight*(c.north-r.y)/c.height|0,x=!0}function ne(e,t,i,n,a,o,s){return h["a"].toDegrees(a)}function ae(e,t,i,n,a,o,s){return h["a"].toDegrees(o)}function oe(e,t,i,n,a,o,s){return ce(e,t,i,n,a,o),te.x}function se(e,t,i,n,a,o,s){return ce(e,t,i,n,a,o),te.y}const re=new o["a"];function ce(e,t,i,n,a,o,s){if(!A){if(e.tilingScheme.projection instanceof d["a"])te.x=h["a"].toDegrees(a),te.y=h["a"].toDegrees(o);else{const t=re;t.longitude=a,t.latitude=o,e.tilingScheme.projection.project(t,te)}A=!0}}function ue(e,t,i,n,a,o,s){return s}t["a"]=O},ee05:function(e,t,i){"use strict";var n=i("77af"),a=i("bd8d"),o=i("2f63"),s=i("7d62"),r=i("e42d"),c=i("f845"),u=i("a894"),l=i("f630"),d=i("d289"),h=i("6ef5"),_=i("6dc0"),f=i("6c84"),p=i("5770"),m=i("a913"),b=i("e1f5"),g=i("6bd8"),y=i("b7c8"),O=i("3626"),v=i("6102");const T=!1;function I(e){this._drawClassificationFBO=new l["a"]({createDepthAttachments:!1}),this._accumulationFBO=new l["a"]({createDepthAttachments:!1}),this._packFBO=new l["a"],this._opaqueDepthStencilTexture=void 0,this._textureToComposite=void 0,this._translucentDepthStencilTexture=void 0,this._packDepthCommand=void 0,this._accumulateCommand=void 0,this._compositeCommand=void 0,this._copyCommand=void 0,this._clearColorCommand=new c["a"]({color:new a["a"](0,0,0,0),owner:this}),this._clearDepthStencilCommand=new c["a"]({depth:1,stencil:0,owner:this}),this._supported=e.depthTexture,this._viewport=new n["a"],this._rsDepth=void 0,this._rsAccumulate=void 0,this._rsComp=void 0,this._useScissorTest=void 0,this._scissorRectangle=void 0,this._hasTranslucentDepth=!1,this._frustumsDrawn=0}function C(e){e._textureToComposite=void 0,e._translucentDepthStencilTexture=e._translucentDepthStencilTexture&&!e._translucentDepthStencilTexture.isDestroyed()&&e._translucentDepthStencilTexture.destroy()}function S(e){e._drawClassificationFBO.destroy(),e._accumulationFBO.destroy(),e._packFBO.destroy()}function x(e,t,i,n){C(e),e._translucentDepthStencilTexture=new m["a"]({context:t,width:i,height:n,pixelFormat:r["a"].DEPTH_STENCIL,pixelDatatype:h["a"].UNSIGNED_INT_24_8,sampler:f["a"].NEAREST})}function w(e,t,i,n){S(e),e._drawClassificationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._drawClassificationFBO.update(t,i,n),e._accumulationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._accumulationFBO.update(t,i,n),e._packFBO.update(t,i,n)}function A(e,t,i,a){if(!e.isSupported())return;e._opaqueDepthStencilTexture=a;const s=e._opaqueDepthStencilTexture.width,r=e._opaqueDepthStencilTexture.height;let c,l;if(e._drawClassificationFBO.isDirty(s,r)&&(x(e,t,s,r),w(e,t,s,r)),Object(o["a"])(e._packDepthCommand)||(c=new p["a"]({sources:[b["a"]]}),l={u_opaqueDepthTexture:function(){return e._opaqueDepthStencilTexture},u_translucentDepthTexture:function(){return e._translucentDepthStencilTexture}},e._packDepthCommand=t.createViewportQuadCommand(c,{uniformMap:l,owner:e})),!Object(o["a"])(e._compositeCommand)){c=new p["a"]({sources:[g["a"]]}),l={colorTexture:function(){return e._textureToComposite}},T&&(c.defines=["DEBUG_SHOW_DEPTH"],l.u_packedTranslucentDepth=function(){return e._packFBO.getColorTexture()}),e._compositeCommand=t.createViewportQuadCommand(c,{uniformMap:l,owner:e});const i=e._compositeCommand,n=i.shaderProgram,a=t.shaderCache.createDerivedShaderProgram(n,"pick",{vertexShaderSource:n.vertexShaderSource,fragmentShaderSource:new p["a"]({sources:c.sources,defines:["PICK"]}),attributeLocations:n._attributeLocations}),o=u["a"].shallowClone(i);o.shaderProgram=a,i.derivedCommands.pick=o}Object(o["a"])(e._copyCommand)||(c=new p["a"]({sources:[g["a"]]}),l={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._copyCommand=t.createViewportQuadCommand(c,{uniformMap:l,owner:e})),Object(o["a"])(e._accumulateCommand)||(c=new p["a"]({sources:[g["a"]]}),l={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._accumulateCommand=t.createViewportQuadCommand(c,{uniformMap:l,owner:e})),e._viewport.width=s,e._viewport.height=r;const d=!n["a"].equals(e._viewport,i.viewport);let h=d!==e._useScissorTest;e._useScissorTest=d,n["a"].equals(e._scissorRectangle,i.viewport)||(e._scissorRectangle=n["a"].clone(i.viewport,e._scissorRectangle),h=!0),Object(o["a"])(e._rsDepth)&&n["a"].equals(e._viewport,e._rsDepth.viewport)&&!h||(e._rsDepth=_["a"].fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),Object(o["a"])(e._packDepthCommand)&&(e._packDepthCommand.renderState=e._rsDepth),Object(o["a"])(e._rsAccumulate)&&n["a"].equals(e._viewport,e._rsAccumulate.viewport)&&!h||(e._rsAccumulate=_["a"].fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:v["a"].EQUAL,reference:O["a"].CESIUM_3D_TILE_MASK}})),Object(o["a"])(e._accumulateCommand)&&(e._accumulateCommand.renderState=e._rsAccumulate),Object(o["a"])(e._rsComp)&&n["a"].equals(e._viewport,e._rsComp.viewport)&&!h||(e._rsComp=_["a"].fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:y["a"].ALPHA_BLEND})),Object(o["a"])(e._compositeCommand)&&(e._compositeCommand.renderState=e._rsComp,e._compositeCommand.derivedCommands.pick.renderState=e._rsComp)}function P(e,t,i){if(!e._hasTranslucentDepth)return;const n=i.framebuffer;i.framebuffer=e._drawClassificationFBO.framebuffer,e._clearColorCommand.execute(t._context,i),i.framebuffer=n,e._frustumsDrawn>1&&(i.framebuffer=e._accumulationFBO.framebuffer,e._clearColorCommand.execute(t._context,i)),e._hasTranslucentDepth=!1,e._frustumsDrawn=0}Object.defineProperties(I.prototype,{hasTranslucentDepth:{get:function(){return this._hasTranslucentDepth}}}),I.prototype.executeTranslucentCommands=function(e,t,i,n,a){const o=n.length;let s,r;const c=e.frameState.useLogDepth,u=e.context,l=i.framebuffer;for(r=0;r<o;++r)if(s=n[r],s=c?s.derivedCommands.logDepth.command:s,s.depthForTranslucentClassification){this._hasTranslucentDepth=!0;break}if(this._hasTranslucentDepth){for(A(this,u,i,a),i.framebuffer=this._drawClassificationFBO.framebuffer,this._clearDepthStencilCommand.execute(u,i),r=0;r<o;++r){if(s=n[r],s=c?s.derivedCommands.logDepth.command:s,!s.depthForTranslucentClassification)continue;const a=s.derivedCommands.depth.depthOnlyCommand;t(a,e,u,i)}this._frustumsDrawn+=this._hasTranslucentDepth?1:0,this._hasTranslucentDepth&&(i.framebuffer=this._packFBO.framebuffer,this._packDepthCommand.execute(u,i)),i.framebuffer=l}},I.prototype.executeClassificationCommands=function(e,t,i,n){if(!this._hasTranslucentDepth)return;const a=e.context,o=a.uniformState,s=i.framebuffer;2===this._frustumsDrawn&&(i.framebuffer=this._accumulationFBO.framebuffer,this._copyCommand.execute(a,i)),i.framebuffer=this._drawClassificationFBO.framebuffer,this._frustumsDrawn>1&&this._clearColorCommand.execute(a,i),o.updatePass(d["a"].CESIUM_3D_TILE_CLASSIFICATION);const r=o.globeDepthTexture;o.globeDepthTexture=this._packFBO.getColorTexture();const c=n.commands[d["a"].CESIUM_3D_TILE_CLASSIFICATION],u=n.indices[d["a"].CESIUM_3D_TILE_CLASSIFICATION];for(let l=0;l<u;++l)t(c[l],e,a,i);o.globeDepthTexture=r,i.framebuffer=s,1!==this._frustumsDrawn&&(i.framebuffer=this._accumulationFBO.framebuffer,this._accumulateCommand.execute(a,i),i.framebuffer=s)},I.prototype.execute=function(e,t){if(!this._hasTranslucentDepth)return;1===this._frustumsDrawn?this._textureToComposite=this._drawClassificationFBO.getColorTexture():this._textureToComposite=this._accumulationFBO.getColorTexture();const i=e.frameState.passes.pick?this._compositeCommand.derivedCommands.pick:this._compositeCommand;i.execute(e.context,t),P(this,e,t)},I.prototype.isSupported=function(){return this._supported},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return C(this),S(this),Object(o["a"])(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),Object(o["a"])(this._packDepthCommand)&&(this._packDepthCommand.shaderProgram=this._packDepthCommand.shaderProgram&&this._packDepthCommand.shaderProgram.destroy()),Object(s["a"])(this)},t["a"]=I},ef77:function(e,t,i){"use strict";var n=i("77af"),a=i("be18"),o=i("2384"),s=i("2f63"),r=i("ddf7"),c=i("017a"),u=i("93da"),l=i("52f0"),d=i("f845"),h=i("d289"),_=i("00f8"),f=i("9dbf"),p=i("5e59"),m=i("6f08"),b=i("8004"),g=i("dd7f"),y=i("8773"),O=i("e0bc"),v=i("7fe1"),T=i("a307"),I=i("569f"),C=i("ee05");function S(){this.command=void 0,this.near=void 0,this.far=void 0}function x(e,t,i){const a=e.context;let o,s;a.depthTexture&&(o=new m["a"]),e._useOIT&&a.depthTexture&&(s=new g["a"](a));const r=new _["a"](a);r.viewport=n["a"].clone(i),this.camera=t,this._cameraClone=f["a"].clone(t),this._cameraStartFired=!1,this._cameraMovedTime=void 0,this.viewport=i,this.passState=r,this.pickFramebuffer=new O["a"](a),this.pickDepthFramebuffer=new y["a"],this.sceneFramebuffer=new v["a"],this.globeDepth=o,this.globeTranslucencyFramebuffer=new b["a"],this.oit=s,this.translucentTileClassification=new C["a"](a),this.pickDepths=[],this.frustumCommandsList=[],this.debugFrustumStatistics=void 0,this._commandExtents=[]}const w=new a["a"],A=new a["a"];function P(e,t){const i=Math.max(Math.abs(e.x),Math.abs(t.x)),n=Math.max(Math.abs(e.y),Math.abs(t.y)),a=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.max(Math.max(i,n),a)}function E(e,t,i){const n=1/Math.max(1,P(e.position,t.position));return a["a"].multiplyByScalar(e.position,n,w),a["a"].multiplyByScalar(t.position,n,A),a["a"].equalsEpsilon(w,A,i)&&a["a"].equalsEpsilon(e.direction,t.direction,i)&&a["a"].equalsEpsilon(e.up,t.up,i)&&a["a"].equalsEpsilon(e.right,t.right,i)&&l["a"].equalsEpsilon(e.transform,t.transform,i)&&e.frustum.equalsEpsilon(t.frustum,i)}function L(e,t,i,n){const a=t.frameState,o=a.camera,r=a.useLogDepth?t.logarithmicDepthFarToNearRatio:t.farToNearRatio,c=t.mode===T["a"].SCENE2D,l=t.nearToFarDistance2D;let d;n*=1+u["a"].EPSILON2,i=Math.min(Math.max(i,o.frustum.near),o.frustum.far),n=Math.max(Math.min(n,o.frustum.far),i),c?(n=Math.min(n,o.position.z+t.nearToFarDistance2D),i=Math.min(i,n),d=Math.ceil(Math.max(1,n-i)/t.nearToFarDistance2D)):d=Math.ceil(Math.log(n/i)/Math.log(r));const h=e.frustumCommandsList;h.length=d;for(let u=0;u<d;++u){let e,t;c?(e=Math.min(n-l,i+u*l),t=Math.min(n,e+l)):(e=Math.max(i,Math.pow(r,u)*i),t=Math.min(n,r*e));let a=h[u];Object(s["a"])(a)?(a.near=e,a.far=t):a=h[u]=new p["a"](e,t)}}function D(e,t,i,n,a){t.debugShowFrustums&&(i.debugOverlappingFrustums=0);const o=e.frustumCommandsList,r=o.length;for(let s=0;s<r;++s){const e=o[s],r=e.near,c=e.far;if(n>c)continue;if(a<r)break;const u=i.pass,l=e.indices[u]++;if(e.commands[u][l]=i,t.debugShowFrustums&&(i.debugOverlappingFrustums|=1<<s),i.executeInClosestFrustum)break}if(t.debugShowFrustums){const t=e.debugFrustumStatistics.commandsInFrustums;t[i.debugOverlappingFrustums]=Object(s["a"])(t[i.debugOverlappingFrustums])?t[i.debugOverlappingFrustums]+1:1,++e.debugFrustumStatistics.totalCommands}t.updateDerivedCommands(i)}x.prototype.checkForCameraUpdates=function(e){const t=this.camera,i=this._cameraClone;return E(t,i,u["a"].EPSILON15)?(this._cameraStartFired&&Object(r["a"])()-this._cameraMovedTime>e.cameraEventWaitTime&&(t.moveEnd.raiseEvent(),this._cameraStartFired=!1),!1):(this._cameraStartFired||(t.moveStart.raiseEvent(),this._cameraStartFired=!0),this._cameraMovedTime=Object(r["a"])(),f["a"].clone(t,i),!0)};const j=new o["a"],N=new c["a"];x.prototype.createPotentiallyVisibleSet=function(e){const t=e.frameState,i=t.camera,n=i.directionWC,a=i.positionWC,o=e._computeCommandList,r=e._overlayCommandList,c=t.commandList;e.debugShowFrustums&&(this.debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});const u=this.frustumCommandsList,l=u.length,_=h["a"].NUMBER_OF_PASSES;for(let s=0;s<l;++s)for(let e=0;e<_;++e)u[s].indices[e]=0;o.length=0,r.length=0;const f=this._commandExtents,p=f.length;let m=0,b=+Number.MAX_VALUE,g=-Number.MAX_VALUE;const y=t.shadowState.shadowsEnabled;let O=+Number.MAX_VALUE,v=-Number.MAX_VALUE,C=Number.MAX_VALUE;const x=t.mode===T["a"].SCENE3D?t.occluder:void 0;let w=t.cullingVolume;const A=j.planes;for(let s=0;s<5;++s)A[s]=w.planes[s];w=j;const P=c.length;for(let T=0;T<P;++T){const t=c[T],u=t.pass;if(u===h["a"].COMPUTE)o.push(t);else if(u===h["a"].OVERLAY)r.push(t);else{let o,r;const c=t.boundingVolume;if(Object(s["a"])(c)){if(!e.isVisible(t,w,x))continue;const i=c.computePlaneDistances(a,n,N);if(o=i.start,r=i.stop,b=Math.min(b,o),g=Math.max(g,r),y&&t.receiveShadows&&o<I["a"].MAXIMUM_DISTANCE&&!(u===h["a"].GLOBE&&o<-100&&r>100)){const e=r-o;u!==h["a"].GLOBE&&o<100&&(C=Math.min(C,e)),O=Math.min(O,o),v=Math.max(v,r)}}else t instanceof d["a"]?(o=i.frustum.near,r=i.frustum.far):(o=i.frustum.near,r=i.frustum.far,b=Math.min(b,o),g=Math.max(g,r));let l=f[m];Object(s["a"])(l)||(l=f[m]=new S),l.command=t,l.near=o,l.far=r,m++}}let E,k;for(y&&(O=Math.min(Math.max(O,i.frustum.near),i.frustum.far),v=Math.max(Math.min(v,i.frustum.far),O)),y&&(t.shadowState.nearPlane=O,t.shadowState.farPlane=v,t.shadowState.closestObjectSize=C),L(this,e,b,g),E=0;E<m;E++)k=f[E],D(this,e,k.command,k.near,k.far);if(m<p)for(E=m;E<p;E++){if(k=f[E],!Object(s["a"])(k.command))break;k.command=void 0}const B=u.length,F=t.frustumSplits;F.length=B+1;for(let s=0;s<B;++s)F[s]=u[s].near,s===B-1&&(F[s+1]=u[s].far)},x.prototype.destroy=function(){let e;this.pickFramebuffer=this.pickFramebuffer&&this.pickFramebuffer.destroy(),this.pickDepthFramebuffer=this.pickDepthFramebuffer&&this.pickDepthFramebuffer.destroy(),this.sceneFramebuffer=this.sceneFramebuffer&&this.sceneFramebuffer.destroy(),this.globeDepth=this.globeDepth&&this.globeDepth.destroy(),this.oit=this.oit&&this.oit.destroy(),this.translucentTileClassification=this.translucentTileClassification&&this.translucentTileClassification.destroy(),this.globeTranslucencyFramebuffer=this.globeTranslucencyFramebuffer&&this.globeTranslucencyFramebuffer.destroy();const t=this.pickDepths,i=t.length;for(e=0;e<i;++e)t[e].destroy()},t["a"]=x}}]);