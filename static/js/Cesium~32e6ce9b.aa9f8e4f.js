(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~32e6ce9b"],{"11ea":function(e,t,n){"use strict";var i=n("2f63"),a=n("eace"),r=n("f1b3"),o=n("ee78");function s(e){this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=o["a"].NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this.state=r["a"].START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function c(e){Object(i["a"])(e)&&e.freeResources()}s.createLevelZeroTiles=function(e){const t=e.getNumberOfXTilesAtLevel(0),n=e.getNumberOfYTilesAtLevel(0),i=new Array(t*n);let a=0;for(let r=0;r<n;++r)for(let n=0;n<t;++n)i[a++]=new s({tilingScheme:e,x:n,y:r,level:0});return i},s.prototype._updateCustomData=function(e,t,n){let r,o,s,c=this.customData;if(Object(i["a"])(t)&&Object(i["a"])(n)){for(c=c.filter((function(e){return-1===n.indexOf(e)})),this._customData=c,s=this._rectangle,r=0;r<t.length;++r)o=t[r],a["a"].contains(s,o.positionCartographic)&&c.push(o);this._frameUpdated=e}else{const e=this._parent;if(Object(i["a"])(e)&&this._frameUpdated!==e._frameUpdated){c.length=0,s=this._rectangle;const t=e.customData;for(r=0;r<t.length;++r)o=t[r],a["a"].contains(s,o.positionCartographic)&&c.push(o);this._frameUpdated=e._frameUpdated}}},Object.defineProperties(s.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return Object(i["a"])(this._southwestChild)||(this._southwestChild=new s({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return Object(i["a"])(this._southeastChild)||(this._southeastChild=new s({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return Object(i["a"])(this._northwestChild)||(this._northwestChild=new s({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return Object(i["a"])(this._northeastChild)||(this._northeastChild=new s({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<r["a"].DONE}},eligibleForUnloading:{get:function(){let e=!0;return Object(i["a"])(this.data)&&(e=this.data.eligibleForUnloading,Object(i["a"])(e)||(e=!0)),e}}}),s.prototype.findLevelZeroTile=function(e,t,n){const i=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=i:t>=i&&(t-=i),!(n<0||n>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter((function(e){return e.x===t&&e.y===n}))[0]},s.prototype.findTileToWest=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;const n=t.findTileToWest(e);return void 0!==n?t.southwestChild===this?n.southeastChild:n.northeastChild:void 0},s.prototype.findTileToEast=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;const n=t.findTileToEast(e);return void 0!==n?t.southeastChild===this?n.southwestChild:n.northwestChild:void 0},s.prototype.findTileToSouth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;const n=t.findTileToSouth(e);return void 0!==n?t.southwestChild===this?n.northwestChild:n.northeastChild:void 0},s.prototype.findTileToNorth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;const n=t.findTileToNorth(e);return void 0!==n?t.northwestChild===this?n.southwestChild:n.southeastChild:void 0},s.prototype.freeResources=function(){this.state=r["a"].START,this.renderable=!1,this.upsampledFromParent=!1,Object(i["a"])(this.data)&&Object(i["a"])(this.data.freeResources)&&this.data.freeResources(),c(this._southwestChild),this._southwestChild=void 0,c(this._southeastChild),this._southeastChild=void 0,c(this._northwestChild),this._northwestChild=void 0,c(this._northeastChild),this._northeastChild=void 0},t["a"]=s},"2ba0":function(e,t,n){"use strict";var i=n("be18"),a=n("82d9");function r(e){this._ellipsoid=new a["a"](e.ellipsoid,i["a"].ZERO)}Object.defineProperties(r.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),t["a"]=r},"33e8":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("535a"),a=n("2f63");function r(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=e.property,n=e.classProperty;this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let r=t.offset,o=t.scale;const s=n.hasValueTransform||Object(a["a"])(r)||Object(a["a"])(o);r=Object(i["a"])(r,n.offset),o=Object(i["a"])(o,n.scale),r=n.unpackVectorAndMatrixTypes(r),o=n.unpackVectorAndMatrixTypes(o),this._offset=r,this._scale=o,this._hasValueTransform=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(r.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}})},"4b3a":function(e,t,n){"use strict";const i={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6};t["a"]=Object.freeze(i)},"5b21":function(e,t,n){"use strict";var i=n("535a"),a=n("2f63"),r=n("92db");function o(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=e.propertyTexture,n=e.class,o=e.textures,s=t.extensions,c=t.extras,l={};if(Object(a["a"])(t.properties))for(const i in t.properties)t.properties.hasOwnProperty(i)&&(l[i]=new r["a"]({property:t.properties[i],classProperty:n.properties[i],textures:o}));this._name=e.name,this._id=e.id,this._class=n,this._properties=l,this._extras=c,this._extensions=s}Object.defineProperties(o.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),o.prototype.getProperty=function(e){return this._properties[e]},t["a"]=o},"738d":function(e,t,n){"use strict";var i=n("71ce"),a=n("535a"),r=n("2f63"),o=n("7d62");function s(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT),this._primitives=[],this._guid=Object(i["a"])(),this._zIndex=void 0,this.show=Object(a["a"])(e.show,!0),this.destroyPrimitives=Object(a["a"])(e.destroyPrimitives,!0)}function c(e,t){return e._primitives.indexOf(t)}Object.defineProperties(s.prototype,{length:{get:function(){return this._primitives.length}}}),s.prototype.add=function(e,t){const n=Object(r["a"])(t),i=e._external=e._external||{},a=i._composites=i._composites||{};return a[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),e},s.prototype.remove=function(e){if(this.contains(e)){const t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},s.prototype.removeAndDestroy=function(e){const t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},s.prototype.removeAll=function(){const e=this._primitives,t=e.length;for(let n=0;n<t;++n)delete e[n]._external._composites[this._guid],this.destroyPrimitives&&e[n].destroy();this._primitives=[]},s.prototype.contains=function(e){return!!(Object(r["a"])(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},s.prototype.raise=function(e){if(Object(r["a"])(e)){const t=c(this,e),n=this._primitives;if(t!==n.length-1){const e=n[t];n[t]=n[t+1],n[t+1]=e}}},s.prototype.raiseToTop=function(e){if(Object(r["a"])(e)){const t=c(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}},s.prototype.lower=function(e){if(Object(r["a"])(e)){const t=c(this,e),n=this._primitives;if(0!==t){const e=n[t];n[t]=n[t-1],n[t-1]=e}}},s.prototype.lowerToBottom=function(e){if(Object(r["a"])(e)){const t=c(this,e),n=this._primitives;0!==t&&(n.splice(t,1),n.unshift(e))}},s.prototype.get=function(e){return this._primitives[e]},s.prototype.update=function(e){if(!this.show)return;const t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)},s.prototype.prePassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];Object(r["a"])(i.prePassesUpdate)&&i.prePassesUpdate(e)}},s.prototype.updateForPass=function(e,t){const n=this._primitives;for(let i=0;i<n.length;++i){const a=n[i];Object(r["a"])(a.updateForPass)&&a.updateForPass(e,t)}},s.prototype.postPassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];Object(r["a"])(i.postPassesUpdate)&&i.postPassesUpdate(e)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return this.removeAll(),Object(o["a"])(this)},t["a"]=s},8624:function(e,t,n){"use strict";var i=n("cef5"),a=n("abab"),r=n("535a"),o=n("2f63"),s=n("c52f"),c=n("3d7f"),l=n("d2c7"),h=n("81d7"),u=n("473c"),d=n("c1e2"),p=n("0123"),b=n("52f0"),m=n("c2eb"),f=n("1184");function _(e,t,n){let i=!n;const a=e.length;let r;if(!i&&a>1){const t=e[0].modelMatrix;for(r=1;r<a;++r)if(!b["a"].equals(t,e[r].modelMatrix)){i=!0;break}}if(i)for(r=0;r<a;++r)Object(o["a"])(e[r].geometry)&&d["a"].transformToWorldCoordinates(e[r]);else b["a"].multiplyTransformation(t,e[0].modelMatrix,t)}function g(e,t){const n=e.attributes,i=n.position,r=i.values.length/i.componentsPerAttribute;n.batchId=new h["a"]({componentDatatype:a["a"].FLOAT,componentsPerAttribute:1,values:new Float32Array(r)});const o=n.batchId.values;for(let a=0;a<r;++a)o[a]=t}function y(e){const t=e.length;for(let n=0;n<t;++n){const t=e[n];Object(o["a"])(t.geometry)?g(t.geometry,n):Object(o["a"])(t.westHemisphereGeometry)&&Object(o["a"])(t.eastHemisphereGeometry)&&(g(t.westHemisphereGeometry,n),g(t.eastHemisphereGeometry,n))}}function T(e){const t=e.instances,n=e.projection,r=e.elementIndexUintSupported,s=e.scene3DOnly,c=e.vertexCacheOptimize,l=e.compressVertices,h=e.modelMatrix;let u,p,b,m=t.length;for(u=0;u<m;++u)if(Object(o["a"])(t[u].geometry)){b=t[u].geometry.primitiveType;break}if(_(t,h,s),!s)for(u=0;u<m;++u)Object(o["a"])(t[u].geometry)&&d["a"].splitLongitude(t[u]);if(y(t),c)for(u=0;u<m;++u){const e=t[u];Object(o["a"])(e.geometry)?(d["a"].reorderForPostVertexCache(e.geometry),d["a"].reorderForPreVertexCache(e.geometry)):Object(o["a"])(e.westHemisphereGeometry)&&Object(o["a"])(e.eastHemisphereGeometry)&&(d["a"].reorderForPostVertexCache(e.westHemisphereGeometry),d["a"].reorderForPreVertexCache(e.westHemisphereGeometry),d["a"].reorderForPostVertexCache(e.eastHemisphereGeometry),d["a"].reorderForPreVertexCache(e.eastHemisphereGeometry))}let f=d["a"].combineInstances(t);for(m=f.length,u=0;u<m;++u){p=f[u];const e=p.attributes;if(s)for(const t in e)e.hasOwnProperty(t)&&e[t].componentDatatype===a["a"].DOUBLE&&d["a"].encodeAttribute(p,t,t+"3DHigh",t+"3DLow");else for(const t in e)if(e.hasOwnProperty(t)&&e[t].componentDatatype===a["a"].DOUBLE){const e=t+"3D",a=t+"2D";d["a"].projectTo2D(p,t,e,a,n),Object(o["a"])(p.boundingSphere)&&"position"===t&&(p.boundingSphereCV=i["a"].fromVertices(p.attributes.position2D.values)),d["a"].encodeAttribute(p,e,e+"High",e+"Low"),d["a"].encodeAttribute(p,a,a+"High",a+"Low")}l&&d["a"].compressVertices(p)}if(!r){let e=[];for(m=f.length,u=0;u<m;++u)p=f[u],e=e.concat(d["a"].fitToUnsignedShortIndices(p));f=e}return f}function O(e,t,n,i){let a,r,s;const c=i.length-1;if(c>=0){const e=i[c];a=e.offset+e.count,s=e.index,r=n[s].indices.length}else a=0,s=0,r=n[s].indices.length;const l=e.length;for(let h=0;h<l;++h){const c=e[h],l=c[t];if(!Object(o["a"])(l))continue;const u=l.indices.length;a+u>r&&(a=0,r=n[++s].indices.length),i.push({index:s,offset:a,count:u}),a+=u}}function v(e,t){const n=[];return O(e,"geometry",t,n),O(e,"westHemisphereGeometry",t,n),O(e,"eastHemisphereGeometry",t,n),n}const C={};function S(e,t){const n=e.attributes;for(const i in n)if(n.hasOwnProperty(i)){const e=n[i];Object(o["a"])(e)&&Object(o["a"])(e.values)&&t.push(e.values.buffer)}Object(o["a"])(e.indices)&&t.push(e.indices.buffer)}function x(e,t){const n=e.length;for(let i=0;i<n;++i)S(e[i],t)}function D(e){let t=1;const n=e.length;for(let a=0;a<n;a++){const n=e[a];if(++t,!Object(o["a"])(n))continue;const r=n.attributes;t+=7+2*i["a"].packedLength+(Object(o["a"])(n.indices)?n.indices.length:0);for(const e in r)if(r.hasOwnProperty(e)&&Object(o["a"])(r[e])){const n=r[e];t+=5+n.values.length}}return t}function j(e,t){const n=e.length,i=new Float64Array(1+19*n);let a=0;i[a++]=n;for(let r=0;r<n;r++){const t=e[r];if(b["a"].pack(t.modelMatrix,i,a),a+=b["a"].packedLength,Object(o["a"])(t.attributes)&&Object(o["a"])(t.attributes.offset)){const e=t.attributes.offset.value;i[a]=e[0],i[a+1]=e[1],i[a+2]=e[2]}a+=3}return t.push(i.buffer),i}function R(e){const t=e,n=new Array(t[0]);let i=0,a=1;while(a<t.length){const e=b["a"].unpack(t,a);let r;a+=b["a"].packedLength,Object(o["a"])(t[a])&&(r={offset:new m["a"](t[a],t[a+1],t[a+2])}),a+=3,n[i++]={modelMatrix:e,attributes:r}}return n}function w(e){const t=e.length,n=1+(i["a"].packedLength+1)*t,a=new Float32Array(n);let r=0;a[r++]=t;for(let s=0;s<t;++s){const t=e[s];Object(o["a"])(t)?(a[r++]=1,i["a"].pack(e[s],a,r)):a[r++]=0,r+=i["a"].packedLength}return a}function P(e){const t=new Array(e[0]);let n=0,a=1;while(a<e.length)1===e[a++]&&(t[n]=i["a"].unpack(e,a)),++n,a+=i["a"].packedLength;return t}C.combineGeometry=function(e){let t,n;const a=e.instances,r=a.length;let s,c,l=!1;r>0&&(t=T(e),t.length>0&&(n=d["a"].createAttributeLocations(t[0]),e.createPickOffsets&&(s=v(a,t))),Object(o["a"])(a[0].attributes)&&Object(o["a"])(a[0].attributes.offset)&&(c=new Array(r),l=!0));const h=new Array(r),u=new Array(r);for(let d=0;d<r;++d){const e=a[d],t=e.geometry;Object(o["a"])(t)&&(h[d]=t.boundingSphere,u[d]=t.boundingSphereCV,l&&(c[d]=e.geometry.offsetAttribute));const n=e.eastHemisphereGeometry,r=e.westHemisphereGeometry;Object(o["a"])(n)&&Object(o["a"])(r)&&(Object(o["a"])(n.boundingSphere)&&Object(o["a"])(r.boundingSphere)&&(h[d]=i["a"].union(n.boundingSphere,r.boundingSphere)),Object(o["a"])(n.boundingSphereCV)&&Object(o["a"])(r.boundingSphereCV)&&(u[d]=i["a"].union(n.boundingSphereCV,r.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:s,offsetInstanceExtend:c,boundingSpheres:h,boundingSpheresCV:u}},C.packCreateGeometryResults=function(e,t){const n=new Float64Array(D(e)),a=[],s={},c=e.length;let l=0;n[l++]=c;for(let h=0;h<c;h++){const t=e[h],c=Object(o["a"])(t);if(n[l++]=c?1:0,!c)continue;n[l++]=t.primitiveType,n[l++]=t.geometryType,n[l++]=Object(r["a"])(t.offsetAttribute,-1);const u=Object(o["a"])(t.boundingSphere)?1:0;n[l++]=u,u&&i["a"].pack(t.boundingSphere,n,l),l+=i["a"].packedLength;const d=Object(o["a"])(t.boundingSphereCV)?1:0;n[l++]=d,d&&i["a"].pack(t.boundingSphereCV,n,l),l+=i["a"].packedLength;const p=t.attributes,b=[];for(const e in p)p.hasOwnProperty(e)&&Object(o["a"])(p[e])&&(b.push(e),Object(o["a"])(s[e])||(s[e]=a.length,a.push(e)));n[l++]=b.length;for(let e=0;e<b.length;e++){const t=b[e],i=p[t];n[l++]=s[t],n[l++]=i.componentDatatype,n[l++]=i.componentsPerAttribute,n[l++]=i.normalize?1:0,n[l++]=i.values.length,n.set(i.values,l),l+=i.values.length}const m=Object(o["a"])(t.indices)?t.indices.length:0;n[l++]=m,m>0&&(n.set(t.indices,l),l+=m)}return t.push(n.buffer),{stringTable:a,packedData:n}},C.unpackCreateGeometryResults=function(e){const t=e.stringTable,n=e.packedData;let r;const o=new Array(n[0]);let s=0,c=1;while(c<n.length){const e=1===n[c++];if(!e){o[s++]=void 0;continue}const d=n[c++],b=n[c++];let m,f,_=n[c++];-1===_&&(_=void 0);const g=1===n[c++];g&&(m=i["a"].unpack(n,c)),c+=i["a"].packedLength;const y=1===n[c++];let T,O,v;y&&(f=i["a"].unpack(n,c)),c+=i["a"].packedLength;const C=new u["a"],S=n[c++];for(r=0;r<S;r++){const e=t[n[c++]],i=n[c++];v=n[c++];const r=0!==n[c++];T=n[c++],O=a["a"].createTypedArray(i,T);for(let t=0;t<T;t++)O[t]=n[c++];C[e]=new h["a"]({componentDatatype:i,componentsPerAttribute:v,normalize:r,values:O})}let x;if(T=n[c++],T>0){const e=O.length/v;for(x=p["a"].createTypedArray(e,T),r=0;r<T;r++)x[r]=n[c++]}o[s++]=new l["a"]({primitiveType:d,geometryType:b,boundingSphere:m,boundingSphereCV:f,indices:x,attributes:C,offsetAttribute:_})}return o},C.packCombineGeometryParameters=function(e,t){const n=e.createGeometryResults,i=n.length;for(let a=0;a<i;a++)t.push(n[a].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:j(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof c["a"],elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}},C.unpackCombineGeometryParameters=function(e){const t=R(e.packedInstances),n=e.createGeometryResults,i=n.length;let a=0;for(let s=0;s<i;s++){const e=C.unpackCreateGeometryResults(n[s]),i=e.length;for(let n=0;n<i;n++){const i=e[n],r=t[a];r.geometry=i,++a}}const r=s["a"].clone(e.ellipsoid),o=e.isGeographic?new c["a"](r):new f["a"](r);return{instances:t,ellipsoid:r,projection:o,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:b["a"].clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}},C.packCombineGeometryResults=function(e,t){Object(o["a"])(e.geometries)&&x(e.geometries,t);const n=w(e.boundingSpheres),i=w(e.boundingSpheresCV);return t.push(n.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:i}},C.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:P(e.boundingSpheres),boundingSpheresCV:P(e.boundingSpheresCV)}},t["a"]=C},"894b":function(e,t,n){"use strict";var i=n("cef5"),a=n("670c"),r=n("be18"),o=n("a561"),s=n("bef8"),c=n("dc1c"),l=n("bd8d"),h=n("2bb9"),u=n("abab"),d=n("535a"),p=n("2f63"),b=n("7d62"),m=n("6cbd"),f=n("5e57"),_=n("d2c7"),g=n("81d7"),y=n("473c"),T=n("0276"),O=n("66bf"),v=n("52f0"),C=n("188e"),S=n("283e"),x=n("6a4b"),D=n("6a29"),j=n("8b68"),R=n("b997"),w=n("a894"),P=n("d289"),A=n("6dc0"),E=n("e90c"),L=n("5770"),I=n("7c5e"),F=n("2cc3"),k=n("29ab"),M=n("06f0"),z=n("8624"),V=n("4b3a"),B=n("a307"),N=n("c86b");function H(e){e=Object(d["a"])(e,d["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=v["a"].clone(Object(d["a"])(e.modelMatrix,v["a"].IDENTITY)),this._modelMatrix=new v["a"],this.show=Object(d["a"])(e.show,!0),this._vertexCacheOptimize=Object(d["a"])(e.vertexCacheOptimize,!1),this._interleave=Object(d["a"])(e.interleave,!1),this._releaseGeometryInstances=Object(d["a"])(e.releaseGeometryInstances,!0),this._allowPicking=Object(d["a"])(e.allowPicking,!0),this._asynchronous=Object(d["a"])(e.asynchronous,!0),this._compressVertices=Object(d["a"])(e.compressVertices,!0),this.cull=Object(d["a"])(e.cull,!0),this.debugShowBoundingVolume=Object(d["a"])(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,this.shadows=Object(d["a"])(e.shadows,N["a"].DISABLED),this._translucent=void 0,this._state=V["a"].READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=[],this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1;const t=this;this._readyPromise=new Promise((e,n)=>{t._completeLoad=(i,a,r)=>{this._error=r,this._state=a,i.afterRender.push((function(){t._ready=t._state===V["a"].COMPLETE||t._state===V["a"].FAILED,Object(p["a"])(r)?n(r):e(t)}))}}),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}function U(e){const t=e.length,n=[],i=e[0].attributes;let a;for(a in i)if(i.hasOwnProperty(a)&&Object(p["a"])(i[a])){const r=i[a];let o=!0;for(let n=1;n<t;++n){const t=e[n].attributes[a];if(!Object(p["a"])(t)||r.componentDatatype!==t.componentDatatype||r.componentsPerAttribute!==t.componentsPerAttribute||r.normalize!==t.normalize){o=!1;break}}o&&n.push(a)}return n}Object.defineProperties(H.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}}});const G=new a["a"],$=new r["a"],Q=new o["a"];function W(e){const t=e.length;return 1===t?e[0]:2===t?a["a"].unpack(e,0,G):3===t?r["a"].unpack(e,0,$):4===t?o["a"].unpack(e,0,Q):void 0}function Y(e,t){const n=e.geometryInstances,i=Array.isArray(n)?n:[n],a=i.length;if(0===a)return;const r=U(i),o=r.length,s=[],c={},h={};let b;const m=i[0];let f,_,g,y=m.attributes;for(f=0;f<o;++f)_=r[f],g=y[_],c[_]=f,s.push({functionName:"czm_batchTable_"+_,componentDatatype:g.componentDatatype,componentsPerAttribute:g.componentsPerAttribute,normalize:g.normalize});-1!==r.indexOf("distanceDisplayCondition")&&(s.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:u["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:u["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:u["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:u["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:u["a"].FLOAT,componentsPerAttribute:1}),h.center3DHigh=s.length-5,h.center3DLow=s.length-4,h.center2DHigh=s.length-3,h.center2DLow=s.length-2,h.radius=s.length-1),-1!==r.indexOf("offset")&&(s.push({functionName:"czm_batchTable_offset2D",componentDatatype:u["a"].FLOAT,componentsPerAttribute:3}),b=s.length-1),s.push({functionName:"czm_batchTable_pickColor",componentDatatype:u["a"].UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});const T=s.length,O=new F["a"](t,s,a);for(f=0;f<a;++f){const n=i[f];y=n.attributes;for(let e=0;e<o;++e){_=r[e],g=y[_];const t=W(g.value),n=c[_];O.setBatchedAttribute(f,n,t)}const a={primitive:Object(d["a"])(n.pickPrimitive,e)};Object(p["a"])(n.id)&&(a.id=n.id);const s=t.createPickId(a);e._pickIds.push(s);const h=s.color,u=Q;u.x=l["a"].floatToByte(h.red),u.y=l["a"].floatToByte(h.green),u.z=l["a"].floatToByte(h.blue),u.w=l["a"].floatToByte(h.alpha),O.setBatchedAttribute(f,T-1,u)}e._batchTable=O,e._batchTableAttributeIndices=c,e._batchTableBoundingSphereAttributeIndices=h,e._batchTableOffsetAttribute2DIndex=b}function Z(e){let t;return t=Array.isArray(e.values)?e.values.slice(0):new e.values.constructor(e.values),new g["a"]({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function q(e){const t=e.attributes,n=new y["a"];for(const i in t)t.hasOwnProperty(i)&&Object(p["a"])(t[i])&&(n[i]=Z(t[i]));let a;if(Object(p["a"])(e.indices)){const t=e.indices;a=Array.isArray(t)?t.slice(0):new t.constructor(t)}return new _["a"]({attributes:n,indices:a,primitiveType:e.primitiveType,boundingSphere:i["a"].clone(e.boundingSphere)})}function J(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:v["a"].clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}const X=/attribute\s+vec(?:3|4)\s+(.*)3DHigh;/g;function K(e){const t=L["a"].replaceMain(e,"czm_non_pick_main"),n="varying vec4 v_pickColor; \nvoid main() \n{ \n    czm_non_pick_main(); \n    v_pickColor = czm_batchTable_pickColor(batchId); \n}";return`${t}\n${n}`}function ee(e){return"varying vec4 v_pickColor;\n"+e}function te(e,t){if(!e.compressVertices)return t;const n=-1!==t.search(/attribute\s+vec3\s+normal;/g),i=-1!==t.search(/attribute\s+vec2\s+st;/g);if(!n&&!i)return t;const a=-1!==t.search(/attribute\s+vec3\s+tangent;/g),r=-1!==t.search(/attribute\s+vec3\s+bitangent;/g);let o=i&&n?2:1;o+=a||r?1:0;const s=o>1?"vec"+o:"float",c="compressedAttributes",l=`attribute ${s} ${c};`;let h="",u="";if(i){h+="vec2 st;\n";const e=o>1?c+".x":c;u+=`    st = czm_decompressTextureCoordinates(${e});\n`}n&&a&&r?(h+="vec3 normal;\nvec3 tangent;\nvec3 bitangent;\n",u+=`    czm_octDecode(${c}.${i?"yz":"xy"}, normal, tangent, bitangent);\n`):(n&&(h+="vec3 normal;\n",u+=`    normal = czm_octDecode(${c}${o>1?"."+(i?"y":"x"):""});\n`),a&&(h+="vec3 tangent;\n",u+=`    tangent = czm_octDecode(${c}.${i&&n?"z":"y"});\n`),r&&(h+="vec3 bitangent;\n",u+=`    bitangent = czm_octDecode(${c}.${i&&n?"z":"y"});\n`));let d=t;d=d.replace(/attribute\s+vec3\s+normal;/g,""),d=d.replace(/attribute\s+vec2\s+st;/g,""),d=d.replace(/attribute\s+vec3\s+tangent;/g,""),d=d.replace(/attribute\s+vec3\s+bitangent;/g,""),d=L["a"].replaceMain(d,"czm_non_compressed_main");const p=`void main() \n{ \n${u}    czm_non_compressed_main(); \n}`;return[l,h,d,p].join("\n")}function ne(e){let t=L["a"].replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n    gl_Position = czm_depthClamp(gl_Position);}\n",t}function ie(e){let t=L["a"].replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n#if defined(GL_EXT_frag_depth)\n    #if defined(LOG_DEPTH)\n        czm_writeLogDepth();\n    #else\n        czm_writeDepthClamp();\n    #endif\n#endif\n}\n",t="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n"+t,t}function ae(e,t){e.vertexAttributes}function re(e,t){return function(){return e[t]}}H._modifyShaderPosition=function(e,t,n){let i,a="",r="",o="";while(null!==(i=X.exec(t))){const s=i[1],c=`vec4 czm_compute${s[0].toUpperCase()}${s.substr(1)}()`;"vec4 czm_computePosition()"!==c&&(a+=c+";\n"),Object(p["a"])(e.rtcCenter)?(t=t.replace(/attribute\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/attribute\s+vec(?:3|4)\s+position3DLow;/g,""),a+="uniform mat4 u_modifiedModelView;\n",r+="attribute vec4 position;\n",o+=c+"\n{\n    return u_modifiedModelView * position;\n}\n\n",t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?o+=c+"\n{\n"+`    return czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);\n}\n\n`:(r+=`attribute vec3 ${s}2DHigh;\nattribute vec3 ${s}2DLow;\n`,o+=c+"\n{\n    vec4 p;\n    if (czm_morphTime == 1.0)\n    {\n"+`        p = czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n`+`        p = czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n`+`                czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy),\n`+`                czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow),\n                czm_morphTime);\n    }\n    return p;\n}\n\n`)}return[a,r,t,o].join("\n")},H._appendShowToShader=function(e,t){if(!Object(p["a"])(e._batchTableAttributeIndices.show))return t;const n=L["a"].replaceMain(t,"czm_non_show_main"),i="void main() \n{ \n    czm_non_show_main(); \n    gl_Position *= czm_batchTable_show(batchId); \n}";return`${n}\n${i}`},H._updateColorAttribute=function(e,t,n){if(!Object(p["a"])(e._batchTableAttributeIndices.color)&&!Object(p["a"])(e._batchTableAttributeIndices.depthFailColor))return t;if(-1===t.search(/attribute\s+vec4\s+color;/g))return t;let i=t;return i=i.replace(/attribute\s+vec4\s+color;/g,""),i=n?i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i},H._updatePickColorAttribute=function(e){let t=e.replace(/attribute\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t},H._appendOffsetToShader=function(e,t){if(!Object(p["a"])(e._batchTableAttributeIndices.offset))return t;let n="attribute float batchId;\n";n+="attribute float applyOffset;";let i=t.replace(/attribute\s+float\s+batchId;/g,n),a="vec4 $1 = czm_computePosition();\n";return a+="    if (czm_sceneMode == czm_sceneMode3D)\n",a+="    {\n",a+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",a+="    }\n",a+="    else\n",a+="    {\n",a+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",a+="    }\n",i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,a),i},H._appendDistanceDisplayConditionToShader=function(e,t,n){if(!Object(p["a"])(e._batchTableAttributeIndices.distanceDisplayCondition))return t;const i=L["a"].replaceMain(t,"czm_non_distanceDisplayCondition_main");let a="void main() \n{ \n    czm_non_distanceDisplayCondition_main(); \n    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);\n    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);\n    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);\n    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);\n";return a+=n?"    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n":"    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);\n    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);\n    vec4 centerRTE;\n    if (czm_morphTime == 1.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);\n    }\n    else\n    {\n        centerRTE = czm_columbusViewMorph(\n                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),\n                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),\n                czm_morphTime);\n    }\n",a+="    float radiusSq = boundingSphereRadius * boundingSphereRadius; \n    float distanceSq; \n    if (czm_sceneMode == czm_sceneMode2D) \n    { \n        distanceSq = czm_eyeHeight2D.y - radiusSq; \n    } \n    else \n    { \n        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; \n    } \n    distanceSq = max(distanceSq, 0.0); \n    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; \n    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; \n    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; \n    gl_Position *= show; \n}",`${i}\n${a}`};const oe=Math.max(f["a"].hardwareConcurrency-1,1);let se;const ce=new D["a"]("combineGeometry");function le(e,t){let n,i,a,r;const o=e._instanceIds;if(e._state===V["a"].READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];const s=e._numberOfInstances=n.length,c=[];let l,h=[];for(a=0;a<s;++a)i=n[a].geometry,o.push(n[a].id),h.push({moduleName:i._workerName,geometry:i});if(!Object(p["a"])(se))for(se=new Array(oe),a=0;a<oe;a++)se[a]=new D["a"]("createGeometry");for(h=Object(x["a"])(h,oe),a=0;a<h.length;a++){let e=0;const t=h[a],n=t.length;for(r=0;r<n;++r)l=t[r],i=l.geometry,Object(p["a"])(i.constructor.pack)&&(l.offset=e,e+=Object(d["a"])(i.constructor.packedLength,i.packedLength));let o;if(e>0){const a=new Float64Array(e);for(o=[a.buffer],r=0;r<n;++r)l=t[r],i=l.geometry,Object(p["a"])(i.constructor.pack)&&(i.constructor.pack(i,a,l.offset),l.geometry=a)}c.push(se[a].scheduleTask({subTasks:h[a]},o))}e._state=V["a"].CREATING,Promise.all(c).then((function(t){e._createGeometryResults=t,e._state=V["a"].CREATED})).catch((function(n){ke(e,t,V["a"].FAILED,n)}))}else if(e._state===V["a"].CREATED){const i=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];const a=t.scene3DOnly,r=t.mapProjection,o=ce.scheduleTask(z["a"].packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:r.ellipsoid,projection:r,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:a,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},i),i);e._createGeometryResults=void 0,e._state=V["a"].COMBINING,Promise.resolve(o).then((function(n){const i=z["a"].unpackCombineGeometryResults(n);e._geometries=i.geometries,e._attributeLocations=i.attributeLocations,e.modelMatrix=v["a"].clone(i.modelMatrix,e.modelMatrix),e._pickOffsets=i.pickOffsets,e._offsetInstanceExtend=i.offsetInstanceExtend,e._instanceBoundingSpheres=i.boundingSpheres,e._instanceBoundingSpheresCV=i.boundingSpheresCV,Object(p["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=V["a"].COMBINED):ke(e,t,V["a"].FAILED,void 0)})).catch((function(n){ke(e,t,V["a"].FAILED,n)}))}}function he(e,t){const n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],i=e._numberOfInstances=n.length,a=new Array(i),r=e._instanceIds;let o,s,c=0;for(s=0;s<i;s++){o=n[s];const e=o.geometry;let t;t=Object(p["a"])(e.attributes)&&Object(p["a"])(e.primitiveType)?q(e):e.constructor.createGeometry(e),a[c++]=J(o,t),r.push(o.id)}a.length=c;const l=t.scene3DOnly,h=t.mapProjection,u=z["a"].combineGeometry({instances:a,ellipsoid:h.ellipsoid,projection:h,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:l,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=u.geometries,e._attributeLocations=u.attributeLocations,e.modelMatrix=v["a"].clone(u.modelMatrix,e.modelMatrix),e._pickOffsets=u.pickOffsets,e._offsetInstanceExtend=u.offsetInstanceExtend,e._instanceBoundingSpheres=u.boundingSpheres,e._instanceBoundingSpheresCV=u.boundingSpheresCV,Object(p["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=V["a"].COMBINED):ke(e,t,V["a"].FAILED,void 0)}function ue(e,t){const n=e._batchTableAttributeIndices.offset;if(!e._recomputeBoundingSpheres||!Object(p["a"])(n))return void(e._recomputeBoundingSpheres=!1);let a;const o=e._offsetInstanceExtend,s=e._instanceBoundingSpheres,c=s.length;let l=e._tempBoundingSpheres;if(!Object(p["a"])(l)){for(l=new Array(c),a=0;a<c;a++)l[a]=new i["a"];e._tempBoundingSpheres=l}for(a=0;a<c;++a){let t=l[a];const i=e._batchTable.getBatchedAttribute(a,n,new r["a"]);t=s[a].clone(t),Pe(t,i,o[a])}const h=[],u=[],d=[];for(a=0;a<c;++a){const e=l[a],t=e.center.x-e.radius;t>0||i["a"].intersectPlane(e,C["a"].ORIGIN_ZX_PLANE)!==O["a"].INTERSECTING?h.push(e):(u.push(e),d.push(e))}let b=h[0],m=d[0],f=u[0];for(a=1;a<h.length;a++)b=i["a"].union(b,h[a]);for(a=1;a<d.length;a++)m=i["a"].union(m,d[a]);for(a=1;a<u.length;a++)f=i["a"].union(f,u[a]);const _=[];for(Object(p["a"])(b)&&_.push(b),Object(p["a"])(m)&&_.push(m),Object(p["a"])(f)&&_.push(f),a=0;a<_.length;a++){const n=_[a].clone(e._boundingSpheres[a]);e._boundingSpheres[a]=n,e._boundingSphereCV[a]=i["a"].projectTo2D(n,t.mapProjection,e._boundingSphereCV[a])}H._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}const de=new m["a"],pe=new s["a"],be=new r["a"],me=new i["a"];function fe(e,t){const n=Object(p["a"])(e._batchTableAttributeIndices.distanceDisplayCondition);if(!n||e._batchTableBoundingSpheresUpdated)return;const a=e._batchTableBoundingSphereAttributeIndices,r=a.center3DHigh,o=a.center3DLow,s=a.center2DHigh,c=a.center2DLow,l=a.radius,h=t.mapProjection,u=h.ellipsoid,d=e._batchTable,b=e._instanceBoundingSpheres,f=b.length;for(let _=0;_<f;++_){let n=b[_];if(!Object(p["a"])(n))continue;const a=e.modelMatrix;Object(p["a"])(a)&&(n=i["a"].transform(n,a,me));const f=n.center,g=n.radius;let y=m["a"].fromCartesian(f,de);if(d.setBatchedAttribute(_,r,y.high),d.setBatchedAttribute(_,o,y.low),!t.scene3DOnly){const e=u.cartesianToCartographic(f,pe),t=h.project(e,be);y=m["a"].fromCartesian(t,de),d.setBatchedAttribute(_,s,y.high),d.setBatchedAttribute(_,c,y.low)}d.setBatchedAttribute(_,l,g)}e._batchTableBoundingSpheresUpdated=!0}const _e=new r["a"],ge=new r["a"];function ye(e,t){const n=Object(p["a"])(e._batchTableAttributeIndices.offset);if(!n||e._batchTableOffsetsUpdated||t.scene3DOnly)return;const a=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,s=o.ellipsoid,c=e._batchTable,l=e._instanceBoundingSpheres,h=l.length;for(let u=0;u<h;++u){let t=l[u];if(!Object(p["a"])(t))continue;const n=c.getBatchedAttribute(u,e._batchTableAttributeIndices.offset);if(r["a"].equals(n,r["a"].ZERO)){c.setBatchedAttribute(u,a,r["a"].ZERO);continue}const h=e.modelMatrix;Object(p["a"])(h)&&(t=i["a"].transform(t,h,me));let d=t.center;d=s.scaleToGeodeticSurface(d,ge);let b=s.cartesianToCartographic(d,pe);const m=o.project(b,be),f=r["a"].add(n,d,_e);b=s.cartesianToCartographic(f,b);const _=o.project(b,_e),g=r["a"].subtract(_,m,_e),y=g.x;g.x=g.z,g.z=g.y,g.y=y,c.setBatchedAttribute(u,a,g)}e._batchTableOffsetsUpdated=!0}function Te(e,t){const n=e._attributeLocations,a=e._geometries,r=t.scene3DOnly,o=t.context,s=[],c=a.length;for(let l=0;l<c;++l){const c=a[l];if(s.push(I["a"].fromGeometry({context:o,geometry:c,attributeLocations:n,bufferUsage:j["a"].STATIC_DRAW,interleave:e._interleave})),Object(p["a"])(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,c);else if(e._boundingSpheres.push(i["a"].clone(c.boundingSphere)),e._boundingSphereWC.push(new i["a"]),!r){const t=c.boundingSphereCV.center,n=t.x,a=t.y,r=t.z;t.x=r,t.y=n,t.z=a,e._boundingSphereCV.push(i["a"].clone(c.boundingSphereCV)),e._boundingSphere2D.push(new i["a"]),e._boundingSphereMorph.push(new i["a"])}}e._va=s,e._primitiveType=a[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,ke(e,t,V["a"].COMPLETE,void 0)}function Oe(e,t,n,i){let a,r=n.getRenderState();i?(a=Object(c["a"])(r,!1),a.cull={enabled:!0,face:k["a"].BACK},e._frontFaceRS=A["a"].fromCache(a),a.cull.face=k["a"].FRONT,e._backFaceRS=A["a"].fromCache(a)):(e._frontFaceRS=A["a"].fromCache(r),e._backFaceRS=e._frontFaceRS),a=Object(c["a"])(r,!1),Object(p["a"])(e._depthFailAppearance)&&(a.depthTest.enabled=!1),Object(p["a"])(e._depthFailAppearance)&&(r=e._depthFailAppearance.getRenderState(),a=Object(c["a"])(r,!1),a.depthTest.func=M["a"].GREATER,i?(a.cull={enabled:!0,face:k["a"].BACK},e._frontFaceDepthFailRS=A["a"].fromCache(a),a.cull.face=k["a"].FRONT,e._backFaceDepthFailRS=A["a"].fromCache(a)):(e._frontFaceDepthFailRS=A["a"].fromCache(a),e._backFaceDepthFailRS=e._frontFaceRS))}function ve(e,t,n){const i=t.context,a=e._attributeLocations;let r=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);r=H._appendOffsetToShader(e,r),r=H._appendShowToShader(e,r),r=H._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=K(r),r=H._updateColorAttribute(e,r,!1),r=te(e,r),r=H._modifyShaderPosition(e,r,t.scene3DOnly);let o=n.getFragmentShaderSource();o=ee(o),e._sp=E["a"].replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:r,fragmentShaderSource:o,attributeLocations:a}),ae(e._sp,a),Object(p["a"])(e._depthFailAppearance)&&(r=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),r=H._appendShowToShader(e,r),r=H._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=K(r),r=H._updateColorAttribute(e,r,!0),r=te(e,r),r=H._modifyShaderPosition(e,r,t.scene3DOnly),r=ne(r),o=e._depthFailAppearance.getFragmentShaderSource(),o=ee(o),o=ie(o),e._spDepthFail=E["a"].replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:r,fragmentShaderSource:o,attributeLocations:a}),ae(e._spDepthFail,a))}const Ce=new v["a"],Se=new r["a"];function xe(e,t,n,i){const a=Object(p["a"])(n)?n._uniforms:void 0,r={},o=t.uniforms;if(Object(p["a"])(o))for(const c in o)o.hasOwnProperty(c)&&(r[c]=re(o,c));let s=Object(h["a"])(r,a);return s=e._batchTable.getUniformMapCallback()(s),Object(p["a"])(e.rtcCenter)&&(s.u_modifiedModelView=function(){const t=i.context.uniformState.view;return v["a"].multiply(t,e._modelMatrix,Ce),v["a"].multiplyByPoint(Ce,e.rtcCenter,Se),v["a"].setTranslation(Ce,Se,Ce),Ce}),s}function De(e,t,n,i,a,r,o,s){const c=xe(e,t,n,s);let l;Object(p["a"])(e._depthFailAppearance)&&(l=xe(e,e._depthFailAppearance,e._depthFailAppearance.material,s));const h=i?P["a"].TRANSLUCENT:P["a"].OPAQUE;let u=a?2:1;u*=Object(p["a"])(e._depthFailAppearance)?2:1,r.length=e._va.length*u;const d=r.length;let b=0;for(let m=0;m<d;++m){let t;a&&(t=r[m],Object(p["a"])(t)||(t=r[m]=new w["a"]({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[b],t.renderState=e._backFaceRS,t.shaderProgram=e._sp,t.uniformMap=c,t.pass=h,++m),t=r[m],Object(p["a"])(t)||(t=r[m]=new w["a"]({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[b],t.renderState=e._frontFaceRS,t.shaderProgram=e._sp,t.uniformMap=c,t.pass=h,Object(p["a"])(e._depthFailAppearance)&&(a&&(++m,t=r[m],Object(p["a"])(t)||(t=r[m]=new w["a"]({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[b],t.renderState=e._backFaceDepthFailRS,t.shaderProgram=e._spDepthFail,t.uniformMap=l,t.pass=h),++m,t=r[m],Object(p["a"])(t)||(t=r[m]=new w["a"]({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[b],t.renderState=e._frontFaceDepthFailRS,t.shaderProgram=e._spDepthFail,t.uniformMap=l,t.pass=h),++b}}function je(e,t,n,i,a,r,o,s){let c;H._updateBoundingVolumes(e,t,a),t.mode===B["a"].SCENE3D?c=e._boundingSphereWC:t.mode===B["a"].COLUMBUS_VIEW?c=e._boundingSphereCV:t.mode===B["a"].SCENE2D&&Object(p["a"])(e._boundingSphere2D)?c=e._boundingSphere2D:Object(p["a"])(e._boundingSphereMorph)&&(c=e._boundingSphereMorph);const l=t.commandList,h=t.passes;if(h.render||h.pick){const t=e.allowPicking,i=N["a"].castShadows(e.shadows),h=N["a"].receiveShadows(e.shadows),u=n.length;let d=s?2:1;d*=Object(p["a"])(e._depthFailAppearance)?2:1;for(let e=0;e<u;++e){const s=Math.floor(e/d),u=n[e];u.modelMatrix=a,u.boundingVolume=c[s],u.cull=r,u.debugShowBoundingVolume=o,u.castShadows=i,u.receiveShadows=h,u.pickId=t?"v_pickColor":void 0,l.push(u)}}}H._updateBoundingVolumes=function(e,t,n,a){let r,o,s;if(a||!v["a"].equals(n,e._modelMatrix))for(v["a"].clone(n,e._modelMatrix),o=e._boundingSpheres.length,r=0;r<o;++r)s=e._boundingSpheres[r],Object(p["a"])(s)&&(e._boundingSphereWC[r]=i["a"].transform(s,n,e._boundingSphereWC[r]),t.scene3DOnly||(e._boundingSphere2D[r]=i["a"].clone(e._boundingSphereCV[r],e._boundingSphere2D[r]),e._boundingSphere2D[r].center.x=0,e._boundingSphereMorph[r]=i["a"].union(e._boundingSphereWC[r],e._boundingSphereCV[r])));const c=e.appearance.pixelSize;if(Object(p["a"])(c))for(o=e._boundingSpheres.length,r=0;r<o;++r){s=e._boundingSpheres[r];const n=e._boundingSphereWC[r],i=t.camera.getPixelSize(s,t.context.drawingBufferWidth,t.context.drawingBufferHeight),a=i*c;n.radius=s.radius+a}},H.prototype.update=function(e){if(!Object(p["a"])(this.geometryInstances)&&0===this._va.length||Object(p["a"])(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&0===this.geometryInstances.length||!Object(p["a"])(this.appearance)||e.mode!==B["a"].SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)return;if(Object(p["a"])(this._error))throw this._error;if(this._state===V["a"].FAILED)return;const t=e.context;if(Object(p["a"])(this._batchTable)||Y(this,t),this._batchTable.attributes.length>0){if(0===R["a"].maximumVertexTextureImageUnits)throw new S["a"]("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==V["a"].COMPLETE&&this._state!==V["a"].COMBINED&&(this.asynchronous?le(this,e):he(this,e)),this._state===V["a"].COMBINED&&(fe(this,e),ye(this,e),Te(this,e)),!this.show||this._state!==V["a"].COMPLETE)return;this._batchTableOffsetsUpdated||ye(this,e),this._recomputeBoundingSpheres&&ue(this,e);const n=this.appearance,i=n.material;let a=!1,r=!1;this._appearance!==n?(this._appearance=n,this._material=i,a=!0,r=!0):this._material!==i&&(this._material=i,r=!0);const o=this.depthFailAppearance,s=Object(p["a"])(o)?o.material:void 0;this._depthFailAppearance!==o?(this._depthFailAppearance=o,this._depthFailMaterial=s,a=!0,r=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,r=!0);const c=this._appearance.isTranslucent();this._translucent!==c&&(this._translucent=c,a=!0),Object(p["a"])(this._material)&&this._material.update(t);const l=n.closed&&c;if(a){const e=Object(d["a"])(this._createRenderStatesFunction,Oe);e(this,t,n,l)}if(r){const t=Object(d["a"])(this._createShaderProgramFunction,ve);t(this,e,n)}if(a||r){const t=Object(d["a"])(this._createCommandsFunction,De);t(this,n,i,c,l,this._colorCommands,this._pickCommands,e)}const h=Object(d["a"])(this._updateAndQueueCommandsFunction,je);h(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)};const Re=new i["a"],we=new i["a"];function Pe(e,t,n){if(n===T["a"].TOP){const n=i["a"].clone(e,Re),a=i["a"].clone(e,we);a.center=r["a"].add(a.center,t,a.center),e=i["a"].union(n,a,e)}else n===T["a"].ALL&&(e.center=r["a"].add(e.center,t,e.center));return e}function Ae(e,t,n){return function(){const i=e.getBatchedAttribute(t,n),a=e.attributes[n],r=a.componentsPerAttribute,o=u["a"].createTypedArray(a.componentDatatype,r);return Object(p["a"])(i.constructor.pack)?i.constructor.pack(i,o,0):o[0]=i,o}}function Ee(e,t,n,i,a){return function(r){const o=W(r);e.setBatchedAttribute(t,n,o),"offset"===a&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}const Le=new r["a"];function Ie(e,t,n){t.boundingSphere={get:function(){let a=e._instanceBoundingSpheres[n];if(Object(p["a"])(a)){a=a.clone();const o=e.modelMatrix,s=t.offset;Object(p["a"])(s)&&Pe(a,r["a"].fromArray(s.get(),0,Le),e._offsetInstanceExtend[n]),Object(p["a"])(o)&&(a=i["a"].transform(a,o))}return a}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function Fe(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}function ke(e,t,n,i){e._completeLoad(t,n,i)}H.prototype.getGeometryInstanceAttributes=function(e){let t=-1;const n=this._lastPerInstanceAttributeIndex,i=this._instanceIds,a=i.length;for(let l=0;l<a;++l){const r=(n+l)%a;if(e===i[r]){t=r;break}}if(-1===t)return;let r=this._perInstanceAttributeCache[t];if(Object(p["a"])(r))return r;const o=this._batchTable,s=this._batchTableAttributeIndices;r={};const c={};for(const l in s)if(s.hasOwnProperty(l)){const e=s[l];c[l]={get:Ae(o,t,e),set:Ee(o,t,e,this,l)}}return Ie(this,c,t),Fe(this,c,t),Object.defineProperties(r,c),this._lastPerInstanceAttributeIndex=t,this._perInstanceAttributeCache[t]=r,r},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){let e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();const n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;const i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,Object(b["a"])(this)},t["a"]=H},"92db":function(e,t,n){"use strict";var i=n("535a"),a=n("2f63"),r=n("4b18"),o=n("a5a5"),s=n("1725");function c(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=e.property,n=e.classProperty,o=e.textures,s=Object(a["a"])(t.channels)?t.channels:[0],c=t,l=r["a"].createModelTextureReader({textureInfo:c,channels:u(s),texture:o[c.index]});this._min=t.min,this._max=t.max;let h=t.offset,d=t.scale;const p=n.hasValueTransform||Object(a["a"])(h)||Object(a["a"])(d);h=Object(i["a"])(h,n.offset),d=Object(i["a"])(d,n.scale),h=n.unpackVectorAndMatrixTypes(h),d=n.unpackVectorAndMatrixTypes(d),this._offset=h,this._scale=d,this._hasValueTransform=p,this._textureReader=l,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(c.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),c.prototype.isGpuCompatible=function(){const e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?!e.isVariableLengthArray&&e.arrayLength<=4&&t===o["a"].SCALAR&&n===s["a"].UINT8:!(!o["a"].isVectorType(t)&&t!==o["a"].SCALAR)&&n===s["a"].UINT8};const l=[void 0,"float","vec2","vec3","vec4"],h=[void 0,"int","ivec2","ivec3","ivec4"];function u(e){return e.map((function(e){return"rgba".charAt(e)})).join("")}c.prototype.getGlslType=function(){const e=this._classProperty;let t=o["a"].getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?l[t]:h[t]},c.prototype.unpackInShader=function(e){const t=this._classProperty;if(t.normalized)return e;const n=this.getGlslType();return`${n}(255.0 * ${e})`},t["a"]=c},"9c90":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("535a"),a=n("2f63"),r=n("33e8");function o(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=e.propertyAttribute,n=e.class,o={};if(Object(a["a"])(t.properties))for(const i in t.properties)t.properties.hasOwnProperty(i)&&(o[i]=new r["a"]({property:t.properties[i],classProperty:n.properties[i]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=o,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(o.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),o.prototype.getProperty=function(e){return this._properties[e]}},a7eb:function(e,t,n){"use strict";var i=n("535a"),a=(n("4f04"),n("2f63"));function r(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(r.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if(Object(a["a"])(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return Object(a["a"])(this._metadataTable)&&(e+=this._metadataTable.byteLength),Object(a["a"])(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}}),r.prototype.hasProperty=function(e,t){return!(!Object(a["a"])(this._metadataTable)||!this._metadataTable.hasProperty(t))||(!(!Object(a["a"])(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(t))||!(!Object(a["a"])(this._batchTableHierarchy)||!this._batchTableHierarchy.hasProperty(e,t)))},r.prototype.hasPropertyBySemantic=function(e,t){return!!Object(a["a"])(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(t)},r.prototype.propertyExists=function(e){return!(!Object(a["a"])(this._metadataTable)||!this._metadataTable.hasProperty(e))||(!(!Object(a["a"])(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(e))||!(!Object(a["a"])(this._batchTableHierarchy)||!this._batchTableHierarchy.propertyExists(e)))},r.prototype.propertyExistsBySemantic=function(e){return!!Object(a["a"])(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(e)};const o=[];r.prototype.getPropertyIds=function(e,t){return t=Object(a["a"])(t)?t:[],t.length=0,Object(a["a"])(this._metadataTable)&&t.push.apply(t,this._metadataTable.getPropertyIds(o)),Object(a["a"])(this._jsonMetadataTable)&&t.push.apply(t,this._jsonMetadataTable.getPropertyIds(o)),Object(a["a"])(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,o)),t},r.prototype.getProperty=function(e,t){let n;return Object(a["a"])(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),Object(a["a"])(n))||Object(a["a"])(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),Object(a["a"])(n))||Object(a["a"])(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),Object(a["a"])(n))?n:void 0},r.prototype.setProperty=function(e,t,n){return!(!Object(a["a"])(this._metadataTable)||!this._metadataTable.setProperty(e,t,n))||(!(!Object(a["a"])(this._jsonMetadataTable)||!this._jsonMetadataTable.setProperty(e,t,n))||Object(a["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))},r.prototype.getPropertyBySemantic=function(e,t){if(Object(a["a"])(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)},r.prototype.setPropertyBySemantic=function(e,t,n){return!!Object(a["a"])(this._metadataTable)&&this._metadataTable.setPropertyBySemantic(e,t,n)},r.prototype.getPropertyTypedArray=function(e){if(Object(a["a"])(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)},r.prototype.getPropertyTypedArrayBySemantic=function(e){if(Object(a["a"])(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)},r.prototype.isClass=function(e,t){const n=this._batchTableHierarchy;return!!Object(a["a"])(n)&&n.isClass(e,t)},r.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t},r.prototype.getExactClassName=function(e){const t=this._batchTableHierarchy;if(Object(a["a"])(t))return t.getClassName(e)},t["a"]=r},c17f:function(e,t,n){"use strict";var i=n("be18"),a=n("bef8"),r=n("535a"),o=n("2f63"),s=n("21d7"),c=n("ddf7"),l=n("93da"),h=n("52f0"),u=n("713f"),d=n("c34a"),p=n("2ac3"),b=n("eace"),m=n("2368"),f=n("2ba0"),_=n("11ea"),g=n("f1b3"),y=n("a307"),T=n("3a92"),O=n("ee78");function v(e){this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};const t=this._tileProvider.tilingScheme,n=t.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new T["a"],this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=Object(r["a"])(e.maximumScreenSpaceError,2),this.tileCacheSize=Object(r["a"])(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new f["a"]({ellipsoid:n}),this._tileLoadProgressEvent=new s["a"],this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function C(e){const t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,S(e);const n=e._levelZeroTiles;if(Object(o["a"])(n))for(let i=0;i<n.length;++i){const t=n[i],a=t.customData,r=a.length;for(let n=0;n<r;++n){const t=a[n];t.level=0,e._addHeightCallbacks.push(t)}n[i].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}function S(e){const t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}function x(e,t){const n=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;(n!==e._lastTileLoadQueueLength||e._tilesInvalidated)&&(t.afterRender.push(s["a"].prototype.raiseEvent.bind(e._tileLoadProgressEvent,n)),e._lastTileLoadQueueLength=n);const i=e._debug;i.enableDebugOutput&&!i.suspendLodUpdate&&(i.maxDepth=e._tilesToRender.reduce((function(e,t){return Math.max(e,t.level)}),-1),i.tilesRendered=e._tilesToRender.length,i.tilesVisited===i.lastTilesVisited&&i.tilesRendered===i.lastTilesRendered&&i.tilesCulled===i.lastTilesCulled&&i.maxDepth===i.lastMaxDepth&&i.tilesWaitingForChildren===i.lastTilesWaitingForChildren&&i.maxDepthVisited===i.lastMaxDepthVisited||(console.log(`Visited ${i.tilesVisited}, Rendered: ${i.tilesRendered}, Culled: ${i.tilesCulled}, Max Depth Rendered: ${i.maxDepth}, Max Depth Visited: ${i.maxDepthVisited}, Waiting for children: ${i.tilesWaitingForChildren}`),i.lastTilesVisited=i.tilesVisited,i.lastTilesRendered=i.tilesRendered,i.lastTilesCulled=i.tilesCulled,i.lastMaxDepth=i.maxDepth,i.lastTilesWaitingForChildren=i.tilesWaitingForChildren,i.lastMaxDepthVisited=i.maxDepthVisited))}let D;Object.defineProperties(v.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),v.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},v.prototype.forEachLoadedTile=function(e){let t=this._tileReplacementQueue.head;while(Object(o["a"])(t))t.state!==g["a"].START&&e(t),t=t.replacementNext},v.prototype.forEachRenderedTile=function(e){const t=this._tilesToRender;for(let n=0,i=t.length;n<i;++n)e(t[n])},v.prototype.updateHeight=function(e,t){const n=this,i={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){const e=n._addHeightCallbacks,t=e.length;for(let n=0;n<t;++n)if(e[n]===i){e.splice(n,1);break}n._removeHeightCallbacks.push(i),i.callback&&(i.callback=void 0)}};return n._addHeightCallbacks.push(i),i.removeFunc},v.prototype.update=function(e){Object(o["a"])(this._tileProvider.update)&&this._tileProvider.update(e)},v.prototype.beginFrame=function(e){const t=e.passes;t.render&&(this._tilesInvalidated&&(C(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),S(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},v.prototype.render=function(e){const t=e.passes,n=this._tileProvider;t.render&&(n.beginUpdate(e),A(this,e),J(this,e),n.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&n.updateForPick(e)},v.prototype.endFrame=function(e){const t=e.passes;t.render&&e.mode!==y["a"].MORPHING&&(U(this,e),q(this,e),x(this,e))},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};const j=new a["a"];function R(e,t){let n=b["a"].center(e.rectangle,j);const i=n.longitude-D.longitude,a=n.latitude-D.latitude;n=b["a"].center(t.rectangle,j);const r=n.longitude-D.longitude,o=n.latitude-D.latitude;return i*i+a*a-(r*r+o*o)}const w=new i["a"];let P=[];function A(e,t){const n=e._debug;if(n.suspendLodUpdate)return;const i=e._tilesToRender;let a;i.length=0;const r=e._tileProvider;if(!Object(o["a"])(e._levelZeroTiles)){if(!r.ready)return;{const t=r.tilingScheme;e._levelZeroTiles=_["a"].createLevelZeroTiles(t);const n=e._levelZeroTiles.length;if(P.length<n)for(P=new Array(n),a=0;a<n;++a)void 0===P[a]&&(P[a]=new L)}}let s;e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;const c=e._levelZeroTiles,l=c.length>1?e._occluders:void 0;D=t.camera.positionCartographic,c.sort(R);const u=e._addHeightCallbacks,d=e._removeHeightCallbacks,p=t.frameNumber;let b;if(u.length>0||d.length>0){for(a=0,b=c.length;a<b;++a)s=c[a],s._updateCustomData(p,u,d);u.length=0,d.length=0}const m=t.camera;e._cameraPositionCartographic=m.positionCartographic;const f=h["a"].getTranslation(m.transform,w);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(f,e._cameraReferenceFrameOriginCartographic),a=0,b=c.length;a<b;++a)s=c[a],e._tileReplacementQueue.markTileRendered(s),s.renderable?V(e,s,r,t,l,!1,P[a]):(E(e,e._tileLoadQueueHigh,s,t),++n.tilesWaitingForChildren);e._lastSelectionFrameNumber=p}function E(e,t,n,i){n.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(n._loadPriority=e.tileProvider.computeTileLoadPriority(n,i)),t.push(n))}function L(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function I(){this.southwest=new L,this.southeast=new L,this.northwest=new L,this.northeast=new L}I.prototype.combine=function(e){const t=this.southwest,n=this.southeast,i=this.northwest,a=this.northeast;e.allAreRenderable=t.allAreRenderable&&n.allAreRenderable&&i.allAreRenderable&&a.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||n.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||a.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+n.notYetRenderableCount+i.notYetRenderableCount+a.notYetRenderableCount};const F=new Array(31);for(let X=0;X<F.length;++X)F[X]=new I;function k(e,t,n,i,a){const r=e._debug;++r.tilesVisited,e._tileReplacementQueue.markTileRendered(n),n._updateCustomData(t.frameNumber),n.level>r.maxDepthVisited&&(r.maxDepthVisited=n.level);const s=B(e,t,n)<e.maximumScreenSpaceError,c=n.southwestChild,l=n.southeastChild,h=n.northwestChild,u=n.northeastChild,d=e._lastSelectionFrameNumber,p=n._lastSelectionResultFrame===d?n._lastSelectionResult:O["a"].NONE,b=e.tileProvider;if(s||i){const r=O["a"].originalResult(p)===O["a"].RENDERED,c=O["a"].originalResult(p)===O["a"].CULLED||p===O["a"].NONE,l=n.state===g["a"].DONE;let h=r||c||l;if(h||Object(o["a"])(b.canRenderWithoutLosingDetail)&&(h=b.canRenderWithoutLosingDetail(n)),h)return s&&E(e,e._tileLoadQueueMedium,n,t),H(e,n),a.allAreRenderable=n.renderable,a.anyWereRenderedLastFrame=p===O["a"].RENDERED,a.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=O["a"].RENDERED,void(a.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));i=!0,s&&E(e,e._tileLoadQueueHigh,n,t)}if(b.canRefine(n)){const o=c.upsampledFromParent&&l.upsampledFromParent&&h.upsampledFromParent&&u.upsampledFromParent;if(o)return H(e,n),E(e,e._tileLoadQueueMedium,n,t),e._tileReplacementQueue.markTileRendered(c),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(h),e._tileReplacementQueue.markTileRendered(u),a.allAreRenderable=n.renderable,a.anyWereRenderedLastFrame=p===O["a"].RENDERED,a.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=O["a"].RENDERED,void(a.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=O["a"].REFINED;const s=e._tilesToRender.length,d=e._tileLoadQueueLow.length,b=e._tileLoadQueueMedium.length,m=e._tileLoadQueueHigh.length,f=e._tileToUpdateHeights.length;if(M(e,c,l,h,u,t,i,a),s!==e._tilesToRender.length){const i=a.allAreRenderable,o=a.anyWereRenderedLastFrame,c=a.notYetRenderableCount;let l=!1;if(!i&&!o){const i=e._tilesToRender;for(let e=s;e<i.length;++e){let t=i[e];while(void 0!==t&&t._lastSelectionResult!==O["a"].KICKED&&t!==n)t._lastSelectionResult=O["a"].kick(t._lastSelectionResult),t=t.parent}e._tilesToRender.length=s,e._tileToUpdateHeights.length=f,H(e,n),n._lastSelectionResult=O["a"].RENDERED;const o=p===O["a"].RENDERED;!o&&c>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=d,e._tileLoadQueueMedium.length=b,e._tileLoadQueueHigh.length=m,E(e,e._tileLoadQueueMedium,n,t),a.notYetRenderableCount=n.renderable?0:1,l=!0),a.allAreRenderable=n.renderable,a.anyWereRenderedLastFrame=o,o||e._tileToUpdateHeights.push(n),++r.tilesWaitingForChildren}e.preloadAncestors&&!l&&E(e,e._tileLoadQueueLow,n,t)}}else n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=O["a"].RENDERED,H(e,n),E(e,e._tileLoadQueueHigh,n,t),a.allAreRenderable=n.renderable,a.anyWereRenderedLastFrame=p===O["a"].RENDERED,a.notYetRenderableCount=n.renderable?0:1}function M(e,t,n,i,a,r,o,s){const c=r.camera.positionCartographic,l=e._tileProvider,h=e._occluders,u=F[t.level],d=u.southwest,p=u.southeast,b=u.northwest,m=u.northeast;c.longitude<t.rectangle.east?c.latitude<t.rectangle.north?(V(e,t,l,r,h,o,d),V(e,n,l,r,h,o,p),V(e,i,l,r,h,o,b),V(e,a,l,r,h,o,m)):(V(e,i,l,r,h,o,b),V(e,t,l,r,h,o,d),V(e,a,l,r,h,o,m),V(e,n,l,r,h,o,p)):c.latitude<t.rectangle.north?(V(e,n,l,r,h,o,p),V(e,t,l,r,h,o,d),V(e,a,l,r,h,o,m),V(e,i,l,r,h,o,b)):(V(e,a,l,r,h,o,m),V(e,i,l,r,h,o,b),V(e,n,l,r,h,o,p),V(e,t,l,r,h,o,d)),u.combine(s)}function z(e,t){const n=t.rectangle;return Object(o["a"])(e._cameraPositionCartographic)&&b["a"].contains(n,e._cameraPositionCartographic)||Object(o["a"])(e._cameraReferenceFrameOriginCartographic)&&b["a"].contains(n,e._cameraReferenceFrameOriginCartographic)}function V(e,t,n,i,a,r,s){if(n.computeTileVisibility(t,i,a)!==m["a"].NONE)return k(e,i,t,r,s);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),s.allAreRenderable=!0,s.anyWereRenderedLastFrame=!1,s.notYetRenderableCount=0,z(e,t)){Object(o["a"])(t.data)&&Object(o["a"])(t.data.vertexArray)||E(e,e._tileLoadQueueMedium,t,i);const n=e._lastSelectionFrameNumber,a=t._lastSelectionResultFrame===n?t._lastSelectionResult:O["a"].NONE;a!==O["a"].CULLED_BUT_NEEDED&&a!==O["a"].RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=O["a"].CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(E(e,e._tileLoadQueueLow,t,i),t._lastSelectionResult=O["a"].CULLED):t._lastSelectionResult=O["a"].CULLED;t._lastSelectionResultFrame=i.frameNumber}function B(e,t,n){if(t.mode===y["a"].SCENE2D||t.camera.frustum instanceof u["a"]||t.camera.frustum instanceof d["a"])return N(e,t,n);const i=e._tileProvider.getLevelMaximumGeometricError(n.level),a=n._distance,r=t.context.drawingBufferHeight,o=t.camera.frustum.sseDenominator;let s=i*r/(a*o);return t.fog.enabled&&(s-=l["a"].fog(a,t.fog.density)*t.fog.sse),s/=t.pixelRatio,s}function N(e,t,n){const i=t.camera;let a=i.frustum;Object(o["a"])(a._offCenterFrustum)&&(a=a._offCenterFrustum);const r=t.context,s=r.drawingBufferWidth,c=r.drawingBufferHeight,h=e._tileProvider.getLevelMaximumGeometricError(n.level),u=Math.max(a.top-a.bottom,a.right-a.left)/Math.max(s,c);let d=h/u;return t.fog.enabled&&t.mode!==y["a"].SCENE2D&&(d-=l["a"].fog(n._distance,t.fog.density)*t.fog.sse),d/=t.pixelRatio,d}function H(e,t){e._tilesToRender.push(t)}function U(e,t){const n=e._tileLoadQueueHigh,i=e._tileLoadQueueMedium,a=e._tileLoadQueueLow;if(0===n.length&&0===i.length&&0===a.length)return;e._tileReplacementQueue.trimTiles(e.tileCacheSize);const r=Object(c["a"])()+e._loadQueueTimeSlice,o=e._tileProvider;let s=$(e,t,o,r,n,!1);s=$(e,t,o,r,i,s),$(e,t,o,r,a,s)}function G(e,t){return e._loadPriority-t._loadPriority}function $(e,t,n,i,a,r){void 0!==n.computeTileLoadPriority&&a.sort(G);for(let o=0,s=a.length;o<s&&(Object(c["a"])()<i||!r);++o){const i=a[o];e._tileReplacementQueue.markTileRendered(i),n.loadTile(t,i),r=!0}return r}const Q=new p["a"],W=new a["a"],Y=new i["a"],Z=[];function q(e,t){if(!e.tileProvider.ready)return;const n=Z;n.length=0;const r=e._tileToUpdateHeights,s=Object(c["a"])(),l=e._updateHeightsTimeSlice,h=s+l,u=t.mode,d=t.mapProjection,p=e.tileProvider.tilingScheme.ellipsoid;let b;while(r.length>0){const t=r[0];if(!Object(o["a"])(t.data)||!Object(o["a"])(t.data.mesh)){const i=t._lastSelectionResultFrame===e._lastSelectionFrameNumber?t._lastSelectionResult:O["a"].NONE;i!==O["a"].RENDERED&&i!==O["a"].CULLED_BUT_NEEDED||n.push(t),r.shift(),e._lastTileIndex=0;continue}const s=t.customData,l=s.length;let m=!1;for(b=e._lastTileIndex;b<l;++b){const e=s[b],n=t.data.terrainData,r=Object(o["a"])(n)&&n.wasCreatedByUpsampling();if(t.level>e.level&&!r){if(Object(o["a"])(e.positionOnEllipsoidSurface)||(e.positionOnEllipsoidSurface=i["a"].fromRadians(e.positionCartographic.longitude,e.positionCartographic.latitude,0,p)),u===y["a"].SCENE3D){const n=p.geodeticSurfaceNormal(e.positionOnEllipsoidSurface,Q.direction),a=p.getSurfaceNormalIntersectionWithZAxis(e.positionOnEllipsoidSurface,11500,Q.origin);if(!Object(o["a"])(a)){let a=0;Object(o["a"])(t.data.tileBoundingRegion)&&(a=t.data.tileBoundingRegion.minimumHeight);const r=Math.min(a,-11500),s=i["a"].multiplyByScalar(n,Math.abs(r)+1,Y);i["a"].subtract(e.positionOnEllipsoidSurface,s,Q.origin)}}else a["a"].clone(e.positionCartographic,W),W.height=-11500,d.project(W,Y),i["a"].fromElements(Y.z,Y.x,Y.y,Y),i["a"].clone(Y,Q.origin),i["a"].clone(i["a"].UNIT_X,Q.direction);const n=t.data.pick(Q,u,d,!1,Y);Object(o["a"])(n)&&(Object(o["a"])(e.callback)&&e.callback(n),e.level=t.level)}if(Object(c["a"])()>=h){m=!0;break}}if(m){e._lastTileIndex=b;break}e._lastTileIndex=0,r.shift()}for(b=0;b<n.length;b++)r.push(n[b])}function J(e,t){const n=e._tileProvider,i=e._tilesToRender;for(let a=0,r=i.length;a<r;++a){const e=i[a];n.showTileThisFrame(e,t)}}t["a"]=v},cd8b:function(e,t,n){"use strict";var i=n("abab"),a=n("2f63"),r=n("0123"),o=n("f20a"),s=n("8b68"),c=n("1da3"),l=n("8bde"),h=n("9e17");function u(e){this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function d(e){this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1}function p(e){this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0}function b(e){const t=e.primitive,n=t.indices,i=t.attributes[0].count,a=new h["a"]({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=a.updatedTriangleIndices,n.indexDatatype=r["a"].fromTypedArray(n.typedArray);const o=m(a.outlineCoordinates),s=new u(o);s.loadBuffer=!0,s.loadTypedArray=!1,e.attributePlans.push(s),t.outlineCoordinates=s.attribute;const c=e.attributePlans,l=e.attributePlans.length;for(let r=0;r<l;r++){const e=c[r].attribute;e.typedArray=a.updateAttribute(e.typedArray)}}function m(e){const t=new l["a"].Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=i["a"].FLOAT,t.type=c["a"].VEC3,t.normalized=!1,t.count=e.length/3,t}function f(e,t){_(e.attributePlans,t),Object(a["a"])(e.indicesPlan)&&g(e.indicesPlan,t)}function _(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i],a=n.attribute,r=a.typedArray;if(n.loadBuffer){const e=o["a"].createVertexBuffer({typedArray:r,context:t,usage:s["a"].STATIC_DRAW});e.vertexArrayDestroyable=!1,a.buffer=e}n.loadTypedArray||(a.typedArray=void 0)}}function g(e,t){const n=e.indices;if(e.loadBuffer){const e=o["a"].createIndexBuffer({typedArray:n.typedArray,context:t,usage:s["a"].STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=e,e.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}p.prototype.postProcess=function(e){this.needsOutlines&&(b(this),f(this,e))},p.AttributeLoadPlan=u,p.IndicesLoadPlan=d,t["a"]=p},f1b3:function(e,t,n){"use strict";const i={START:0,LOADING:1,DONE:2,FAILED:3};t["a"]=Object.freeze(i)}}]);