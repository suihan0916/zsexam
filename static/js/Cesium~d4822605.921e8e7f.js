(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~d4822605"],{8773:function(t,e,n){"use strict";var i=n("77af"),o=n("7d62"),r=n("f630"),a=n("00f8");function s(){this._framebuffer=new r["a"]({color:!1,depthStencil:!0,supportsDepthTexture:!0}),this._passState=void 0}function c(t){t._framebuffer.destroy()}function f(t,e){const n=e.drawingBufferWidth,o=e.drawingBufferHeight;t._framebuffer.update(e,n,o);const r=new a["a"](e);r.blendingEnabled=!1,r.scissorTest={enabled:!0,rectangle:new i["a"]},r.viewport=new i["a"],t._passState=r}Object.defineProperties(s.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),s.prototype.update=function(t,e,n){const i=n.width,o=n.height;this._framebuffer.isDirty(i,o)&&f(this,t);const r=this.framebuffer,a=this._passState;return a.framebuffer=r,a.viewport.width=i,a.viewport.height=o,a.scissorTest.rectangle.x=e.x,a.scissorTest.rectangle.y=o-e.y,a.scissorTest.rectangle.width=1,a.scissorTest.rectangle.height=1,a},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return c(this),Object(o["a"])(this)},e["a"]=s},d572:function(t,e,n){"use strict";var i=n("dd06"),o=n("77af"),r=n("670c"),a=n("be18"),s=n("bef8"),c=n("bd8d"),f=n("535a"),u=n("2f63"),p=n("52f0"),h=n("713f"),d=n("c34a"),l=n("4e1a"),m=n("4dc8"),w=n("2ac3"),b=n("ac9c"),g=n("9dbf"),y=n("5af0"),_=n("d150"),O=n("56d3"),C=n("dd54"),j=n("738d"),x=n("a307"),P=n("0c80"),k=n("ef77");const D=.1,v=new O["a"]({pass:_["a"].MOST_DETAILED_PRELOAD}),S=new O["a"]({pass:_["a"].MOST_DETAILED_PICK}),T=new O["a"]({pass:_["a"].PICK});function F(t){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;const e=new o["a"](0,0,1,1),n=new g["a"](t);n.frustum=new h["a"]({width:D,aspectRatio:1,near:.1}),this._pickOffscreenView=new k["a"](t,n,e)}F.prototype.update=function(){this._pickPositionCacheDirty=!0},F.prototype.getPickDepth=function(t,e){const n=t.view.pickDepths;let i=n[e];return Object(u["a"])(i)||(i=new C["a"],n[e]=i),i};const E=new d["a"],V=new a["a"],M=new a["a"],W=new r["a"],B=new p["a"];function R(t,e,n,i,o){const r=t.camera;let s=r.frustum;Object(u["a"])(s._offCenterFrustum)&&(s=s._offCenterFrustum);let c=2*(e.x-o.x)/o.width-1;c*=.5*(s.right-s.left);let f=2*(o.height-e.y-o.y)/o.height-1;f*=.5*(s.top-s.bottom);const h=p["a"].clone(r.transform,B);r._setTransform(p["a"].IDENTITY);const d=a["a"].clone(r.position,V);a["a"].multiplyByScalar(r.right,c,M),a["a"].add(M,d,d),a["a"].multiplyByScalar(r.up,f,M),a["a"].add(M,d,d),r._setTransform(h),t.mode===x["a"].SCENE2D&&a["a"].fromElements(d.z,d.x,d.y,d);const l=s.getPixelDimensions(o.width,o.height,1,1,W),m=E;return m.right=.5*l.x,m.left=-m.right,m.top=.5*l.y,m.bottom=-m.top,m.near=s.near,m.far=s.far,m.computeCullingVolume(d,r.directionWC,r.upWC)}const A=new m["a"],H=new r["a"];function N(t,e,n,i,o){const r=t.camera,a=r.frustum,s=a.near,c=Math.tan(.5*a.fovy),f=a.aspectRatio*c,u=2*(e.x-o.x)/o.width-1,p=2*(o.height-e.y-o.y)/o.height-1,h=u*s*f,d=p*s*c,l=a.getPixelDimensions(o.width,o.height,1,1,H),m=l.x*n*.5,w=l.y*i*.5,b=A;return b.top=d+w,b.bottom=d-w,b.right=h+m,b.left=h-m,b.near=s,b.far=a.far,b.computeCullingVolume(r.positionWC,r.directionWC,r.upWC)}function I(t,e,n,i,o){const r=t.camera.frustum;return r instanceof h["a"]||r instanceof d["a"]?R(t,e,n,i,o):N(t,e,n,i,o)}let L=3,z=3,q=new o["a"](0,0,L,z);const G=new r["a"],J=new c["a"](0,0,0,0);function K(t,e){const n=t.context,i=t.frameState,r=t.environmentState,a=t.defaultView;t.view=a;const s=a.viewport;s.x=0,s.y=0,s.width=n.drawingBufferWidth,s.height=n.drawingBufferHeight;let c=a.passState;c.viewport=o["a"].clone(s,c.viewport),t.clearPasses(i.passes),i.passes.pick=!0,i.passes.depth=!0,i.cullingVolume=I(t,e,1,1,s),i.tilesetPassState=T,t.updateEnvironment(),r.renderTranslucentDepthForPick=!0,c=a.pickDepthFramebuffer.update(n,e,s),t.updateAndExecuteCommands(c,J),t.resolveFramebuffers(c),n.endFrame()}F.prototype.pick=function(t,e,n,i){L=Object(f["a"])(n,3),z=Object(f["a"])(i,L);const r=t.context,a=r.uniformState,s=t.frameState,c=t.defaultView;t.view=c;const u=c.viewport;u.x=0,u.y=0,u.width=r.drawingBufferWidth,u.height=r.drawingBufferHeight;let p=c.passState;p.viewport=o["a"].clone(u,p.viewport);const h=P["a"].transformWindowToDrawingBuffer(t,e,G);t.jobScheduler.disableThisFrame(),t.updateFrameState(),s.cullingVolume=I(t,h,L,z,u),s.invertClassification=!1,s.passes.pick=!0,s.tilesetPassState=T,a.update(s),t.updateEnvironment(),q.x=h.x-.5*(L-1),q.y=t.drawingBufferHeight-h.y-.5*(z-1),q.width=L,q.height=z,p=c.pickFramebuffer.begin(q,c.viewport),t.updateAndExecuteCommands(p,J),t.resolveFramebuffers(p);const d=c.pickFramebuffer.end(q);return r.endFrame(),d};const Q=new l["a"],U=new m["a"],X=new h["a"],Y=new d["a"];F.prototype.pickPositionWorldCoordinates=function(t,e,n){if(!t.useDepthPicking)return;const i=e.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return a["a"].clone(this._pickPositionCache[i],n);const o=t.frameState,r=t.context,s=r.uniformState,c=t.defaultView;t.view=c;const f=P["a"].transformWindowToDrawingBuffer(t,e,G);t.pickTranslucentDepth?K(t,f):(t.updateFrameState(),s.update(o),t.updateEnvironment()),f.y=t.drawingBufferHeight-f.y;const p=t.camera;let h;h=Object(u["a"])(p.frustum.fov)?p.frustum.clone(Q):Object(u["a"])(p.frustum.infiniteProjectionMatrix)?p.frustum.clone(U):Object(u["a"])(p.frustum.width)?p.frustum.clone(X):p.frustum.clone(Y);const d=c.frustumCommandsList,l=d.length;for(let m=0;m<l;++m){const e=this.getPickDepth(t,m),c=e.getDepth(r,f.x,f.y);if(Object(u["a"])(c)&&(c>0&&c<1)){const e=d[m];let r;return t.mode===x["a"].SCENE2D?(r=p.position.z,p.position.z=r-e.near+1,h.far=Math.max(1,e.far-e.near),h.near=1,s.update(o),s.updateFrustum(h)):(h.near=e.near*(0!==m?t.opaqueFrustumNearOffset:1),h.far=e.far,s.updateFrustum(h)),n=P["a"].drawingBufferToWgs84Coordinates(t,f,c,n),t.mode===x["a"].SCENE2D&&(p.position.z=r,s.update(o)),this._pickPositionCache[i]=a["a"].clone(n),n}}this._pickPositionCache[i]=void 0};const Z=new s["a"];function $(t,e){let n,i;const o=[],r=[],a=[],s=[];Object(u["a"])(t)||(t=Number.MAX_VALUE);let c=e();while(Object(u["a"])(c)){const n=c.object,f=c.position,p=c.exclude;if(Object(u["a"])(f)&&!Object(u["a"])(n)){o.push(c);break}if(!Object(u["a"])(n)||!Object(u["a"])(n.primitive))break;if(!p&&(o.push(c),0>=--t))break;const h=n.primitive;let d=!1;"function"===typeof h.getGeometryInstanceAttributes&&Object(u["a"])(n.id)&&(i=h.getGeometryInstanceAttributes(n.id),Object(u["a"])(i)&&Object(u["a"])(i.show)&&(d=!0,i.show=b["a"].toValue(!1,i.show),a.push(i))),n instanceof y["a"]&&(d=!0,n.show=!1,s.push(n)),d||(h.show=!1,r.push(h)),c=e()}for(n=0;n<r.length;++n)r[n].show=!0;for(n=0;n<a.length;++n)i=a[n],i.show=b["a"].toValue(!0,i.show);for(n=0;n<s.length;++n)s[n].show=!0;return o}F.prototype.pickPosition=function(t,e,n){if(n=this.pickPositionWorldCoordinates(t,e,n),Object(u["a"])(n)&&t.mode!==x["a"].SCENE3D){a["a"].fromElements(n.y,n.z,n.x,n);const e=t.mapProjection,i=e.ellipsoid,o=e.unproject(n,Z);i.cartographicToCartesian(o,n)}return n},F.prototype.drillPick=function(t,e,n,i,o){const r=this,a=function(){const n=r.pick(t,e,i,o);if(Object(u["a"])(n))return{object:n,position:void 0,exclude:!1}},s=$(n,a);return s.map((function(t){return t.object}))};const tt=new a["a"],et=new a["a"];function nt(t,e,n){this.ray=t,this.width=e,this.tilesets=n,this.ready=!1;const i=this;this.promise=new Promise(t=>{i._completePick=()=>{t()}})}function it(t,e,n,i){const o=e.direction,r=a["a"].mostOrthogonalAxis(o,tt),s=a["a"].cross(o,r,tt),c=a["a"].cross(o,s,et);return i.position=e.origin,i.direction=o,i.up=c,i.right=s,i.frustum.width=Object(f["a"])(n,D),i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function ot(t,e,n){const i=e.frameState,o=n.ray,r=n.width,a=n.tilesets,s=t._pickOffscreenView.camera,c=it(t,o,r,s),f=v;f.camera=s,f.cullingVolume=c;let u=!0;const p=a.length;for(let h=0;h<p;++h){const t=a[h];t.show&&e.primitives.contains(t)&&(t.updateForPass(i,f),u=u&&f.ready)}return u&&n._completePick(),u}function rt(t,e,n){const i=t.length;for(let o=0;o<i;++o){const i=t.get(o);i.show&&(Object(u["a"])(i.isCesium3DTileset)?Object(u["a"])(e)&&-1!==e.indexOf(i)||n.push(i):i instanceof j["a"]&&rt(i,e,n))}}function at(t,e,n,i,o,r){const a=[];if(rt(e.primitives,i,a),0===a.length)return Promise.resolve(r());const s=new nt(n,o,a);return t._mostDetailedRayPicks.push(s),s.promise.then((function(){return r()}))}function st(t,e){return!(!Object(u["a"])(t)||!Object(u["a"])(e)||0===e.length)&&(e.indexOf(t)>-1||e.indexOf(t.primitive)>-1||e.indexOf(t.id)>-1)}function ct(t,e,n,i,r,a,s){const c=e.context,f=c.uniformState,p=e.frameState,h=t._pickOffscreenView;e.view=h,it(t,n,r,h.camera),q=o["a"].clone(h.viewport,q);const d=h.pickFramebuffer.begin(q,h.viewport);let l;e.jobScheduler.disableThisFrame(),e.updateFrameState(),p.invertClassification=!1,p.passes.pick=!0,p.passes.offscreen=!0,p.tilesetPassState=s?S:T,f.update(p),e.updateEnvironment(),e.updateAndExecuteCommands(d,J),e.resolveFramebuffers(d);const m=h.pickFramebuffer.end(q);if(e.context.depthTexture){const i=h.frustumCommandsList.length;for(let o=0;o<i;++o){const i=t.getPickDepth(e,o),r=i.getDepth(c,0,0);if(Object(u["a"])(r)&&(r>0&&r<1)){const t=h.frustumCommandsList[o],i=t.near*(0!==o?e.opaqueFrustumNearOffset:1),a=t.far,s=i+r*(a-i);l=w["a"].getPoint(n,s);break}}}if(e.view=e.defaultView,c.endFrame(),Object(u["a"])(m)||Object(u["a"])(l))return{object:m,position:l,exclude:!Object(u["a"])(l)&&a||st(m,i)}}function ft(t,e,n,i,o,r,a,s){const c=function(){return ct(t,e,n,o,r,a,s)};return $(i,c)}function ut(t,e,n,i,o,r,a){const s=ft(t,e,n,1,i,o,r,a);if(s.length>0)return s[0]}function pt(t,e,n,i,o,r,a,s){return ft(t,e,n,i,o,r,a,s)}function ht(t,e){return new Promise((n,i)=>{e.then((function(e){const i=t.postRender.addEventListener((function(){i(),n(e)}));t.requestRender()})).catch((function(t){i(t)}))})}F.prototype.updateMostDetailedRayPicks=function(t){const e=this._mostDetailedRayPicks;for(let n=0;n<e.length;++n)ot(this,t,e[n])&&e.splice(n--,1)},F.prototype.pickFromRay=function(t,e,n,i){return ut(this,t,e,n,i,!1,!1)},F.prototype.drillPickFromRay=function(t,e,n,i,o){return pt(this,t,e,n,i,o,!1,!1)},F.prototype.pickFromRayMostDetailed=function(t,e,n,i){const o=this;return e=w["a"].clone(e),n=Object(u["a"])(n)?n.slice():n,ht(t,at(o,t,e,n,i,(function(){return ut(o,t,e,n,i,!1,!0)})))},F.prototype.drillPickFromRayMostDetailed=function(t,e,n,i,o){const r=this;return e=w["a"].clone(e),i=Object(u["a"])(i)?i.slice():i,ht(t,at(r,t,e,i,o,(function(){return pt(r,t,e,n,i,o,!1,!0)})))};const dt=new a["a"],lt=new a["a"],mt=new w["a"],wt=new s["a"];function bt(t,e){const n=t.globe,o=Object(u["a"])(n)?n.ellipsoid:t.mapProjection.ellipsoid,r=i["a"]._defaultMaxTerrainHeight,c=o.geodeticSurfaceNormalCartographic(e,lt),f=s["a"].toCartesian(e,o,dt),p=mt;p.origin=f,p.direction=c;const h=new w["a"];return w["a"].getPoint(p,r,h.origin),a["a"].negate(c,h.direction),h}function gt(t,e){const n=t.globe,i=Object(u["a"])(n)?n.ellipsoid:t.mapProjection.ellipsoid,o=s["a"].fromCartesian(e,i,wt);return bt(t,o)}function yt(t,e){const n=t.globe,i=Object(u["a"])(n)?n.ellipsoid:t.mapProjection.ellipsoid,o=s["a"].fromCartesian(e,i,wt);return o.height}function _t(t,e,n,i,o){const r=bt(e,n);return at(t,e,r,i,o,(function(){const n=ut(t,e,r,i,o,!0,!0);if(Object(u["a"])(n))return yt(e,n.position)}))}function Ot(t,e,n,i,o,r){const s=gt(e,n);return at(t,e,s,i,o,(function(){const n=ut(t,e,s,i,o,!0,!0);if(Object(u["a"])(n))return a["a"].clone(n.position,r)}))}F.prototype.sampleHeight=function(t,e,n,i){const o=bt(t,e),r=ut(this,t,o,n,i,!0,!1);if(Object(u["a"])(r))return yt(t,r.position)},F.prototype.clampToHeight=function(t,e,n,i,o){const r=gt(t,e),s=ut(this,t,r,n,i,!0,!1);if(Object(u["a"])(s))return a["a"].clone(s.position,o)},F.prototype.sampleHeightMostDetailed=function(t,e,n,i){n=Object(u["a"])(n)?n.slice():n;const o=e.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=_t(this,t,e[a],n,i);return ht(t,Promise.all(r).then((function(t){const n=t.length;for(let i=0;i<n;++i)e[i].height=t[i];return e})))},F.prototype.clampToHeightMostDetailed=function(t,e,n,i){n=Object(u["a"])(n)?n.slice():n;const o=e.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=Ot(this,t,e[a],n,i,e[a]);return ht(t,Promise.all(r).then((function(t){const n=t.length;for(let i=0;i<n;++i)e[i]=t[i];return e})))},F.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()},e["a"]=F},dd54:function(t,e,n){"use strict";var i=n("a561"),o=n("2f63"),r=n("7d62"),a=n("f630"),s=n("6dc0");function c(){this._framebuffer=new a["a"],this._textureToCopy=void 0,this._copyDepthCommand=void 0}function f(t,e,n){const i=n.width,o=n.height;t._framebuffer.update(e,i,o)}function u(t,e,n){if(!Object(o["a"])(t._copyDepthCommand)){const n="uniform highp sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    gl_FragColor = czm_packDepth(texture2D(u_texture, v_textureCoordinates).r);\n}\n";t._copyDepthCommand=e.createViewportQuadCommand(n,{renderState:s["a"].fromCache(),uniformMap:{u_texture:function(){return t._textureToCopy}},owner:t})}t._textureToCopy=n,t._copyDepthCommand.framebuffer=t.framebuffer}Object.defineProperties(c.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),c.prototype.update=function(t,e){f(this,t,e),u(this,t,e)};const p=new i["a"],h=new i["a"](1,1/255,1/65025,1/16581375);c.prototype.getDepth=function(t,e,n){if(!Object(o["a"])(this.framebuffer))return;const r=t.readPixels({x:e,y:n,width:1,height:1,framebuffer:this.framebuffer}),a=i["a"].unpack(r,0,p);return i["a"].divideByScalar(a,255,a),i["a"].dot(a,h)},c.prototype.executeCopyDepth=function(t,e){this._copyDepthCommand.execute(t,e)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._framebuffer.destroy(),Object(o["a"])(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=Object(o["a"])(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy()),Object(r["a"])(this)},e["a"]=c},e0bc:function(t,e,n){"use strict";var i=n("77af"),o=n("bd8d"),r=n("535a"),a=n("2f63"),s=n("7d62"),c=n("f630"),f=n("00f8");function u(t){const e=new f["a"](t);e.blendingEnabled=!1,e.scissorTest={enabled:!0,rectangle:new i["a"]},e.viewport=new i["a"],this._context=t,this._fb=new c["a"]({depthStencil:!0}),this._passState=e,this._width=0,this._height=0}u.prototype.begin=function(t,e){const n=this._context,o=e.width,r=e.height;return i["a"].clone(t,this._passState.scissorTest.rectangle),this._width=o,this._height=r,this._fb.update(n,o,r),this._passState.framebuffer=this._fb.framebuffer,this._passState.viewport.width=o,this._passState.viewport.height=r,this._passState};const p=new o["a"];u.prototype.end=function(t){const e=Object(r["a"])(t.width,1),n=Object(r["a"])(t.height,1),i=this._context,s=i.readPixels({x:t.x,y:t.y,width:e,height:n,framebuffer:this._fb.framebuffer}),c=Math.max(e,n),f=c*c,u=Math.floor(.5*e),h=Math.floor(.5*n);let d=0,l=0,m=0,w=-1;for(let r=0;r<f;++r){if(-u<=d&&d<=u&&-h<=l&&l<=h){const t=4*((h-l)*e+d+u);p.red=o["a"].byteToFloat(s[t]),p.green=o["a"].byteToFloat(s[t+1]),p.blue=o["a"].byteToFloat(s[t+2]),p.alpha=o["a"].byteToFloat(s[t+3]);const n=i.getObjectByPickColor(p);if(Object(a["a"])(n))return n}if(d===l||d<0&&-d===l||d>0&&d===1-l){const t=m;m=-w,w=t}d+=m,l+=w}},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._fb.destroy(),Object(s["a"])(this)},e["a"]=u}}]);